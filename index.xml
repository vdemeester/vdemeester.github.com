<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Vincent Demeester</title>
    <link>http://vincent.demeester.fr/</link>
    <description>Recent content on Vincent Demeester</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr-fr</language>
    <lastBuildDate>Wed, 11 Jan 2017 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://vincent.demeester.fr/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Golang testing ‚Äî functional arguments for wonderful builders</title>
      <link>http://vincent.demeester.fr/posts/2017-01-01-go-testing-functionnal-builders/</link>
      <pubDate>Wed, 11 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2017-01-01-go-testing-functionnal-builders/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;
Programming is not easy; even the best programmers are incapable of
writing programs that work exactly as intended every time. Therefore
an important part of the software development process is
testing. Writing tests for our code is a good way to ensure quality
and improve reliability.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
Go programs, when properly implemented, are fairly simple to test
programatically. The &lt;code&gt;testing&lt;/code&gt; built-in library and the features of
the language itself offer plenty of ways to write good tests. As this
is a subject I particularly like, I&#39;m gonna write a bunch of articles
about it, that, &lt;i&gt;hopefully&lt;/i&gt; do not get old or boring.
&lt;/p&gt;

&lt;p&gt;
I&#39;m not going to start by introducing how &lt;code&gt;testing&lt;/code&gt; works, it&#39;s
already widely described in &lt;a href=&#34;https://golang.org/pkg/testing/&#34;&gt;the &lt;code&gt;testing&lt;/code&gt; godoc&lt;/a&gt;, &lt;a href=&#34;https://blog.golang.org/examples&#34;&gt;some&lt;/a&gt; &lt;a href=&#34;https://www.golang-book.com/books/intro/12&#34;&gt;articles&lt;/a&gt; and
&lt;a href=&#34;https://jonathanmh.com/golang-unit-testing-for-absolute-beginners/&#34;&gt;blogs&lt;/a&gt;. I&#39;m going to jump ahead on a more advanced techinque to write
tests, the &lt;code&gt;builders&lt;/code&gt; for tests.
&lt;/p&gt;

&lt;p&gt;
One of the most important characteristic of a &lt;b&gt;unit test&lt;/b&gt; (and any
type of test really) is &lt;b&gt;readability&lt;/b&gt;. This means it should be &lt;i&gt;easy
to read&lt;/i&gt; but most importantly it should &lt;b&gt;clearly show the intent of
the test&lt;/b&gt;. The setup (and cleanup) of the tests should be as small as
possible to avoid the noise. And as we are going to see below, &lt;code&gt;go&lt;/code&gt;
makes it pretty easy to do so.
&lt;/p&gt;

&lt;div id=&#34;outline-container-sec-1&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-1&#34;&gt;Builders in tests&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-1&#34;&gt;
&lt;p&gt;
Sometimes, your need to create data structure for your test that
might take a lot of line and introduce noise. In &lt;code&gt;golang&lt;/code&gt; we don&#39;t
have method overload or even &lt;i&gt;constructors&lt;/i&gt; as some other language
have. This means most of the time, we end up building our data using
directly the struct expression, as below.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt; := &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;{
        &lt;span class=&#34;org-constant&#34;&gt;Name&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;carthage&#34;&lt;/span&gt;,
        &lt;span class=&#34;org-constant&#34;&gt;Hostname&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;carthage.sbr.pm&#34;&lt;/span&gt;,
        &lt;span class=&#34;org-constant&#34;&gt;Platform&lt;/span&gt;: &lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x86_64&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;:           &lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;,
        },
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Let&#39;s imagine we have a &lt;code&gt;Validate&lt;/code&gt; function that make sure the
specified &lt;code&gt;Node&lt;/code&gt; is supported on our structure. We would write some
tests that ensure that.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateLinuxIsSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&amp;amp;&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Name&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;carthage&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;Hostname&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;carthage.sbr.pm&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;Platform&lt;/span&gt;: &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                        &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x86_64&#34;&lt;/span&gt;,
                        &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;:           &lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;,
                },
        })
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; !&lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;linux should be supported, it was not&#34;&lt;/span&gt;)
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateDarwinIsNotSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&amp;amp;&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Name&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;babylon&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;Hostname&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;babylon.sbr.pm&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;Platform&lt;/span&gt;: &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                        &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x86_64&#34;&lt;/span&gt;,
                        &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;:           &lt;span class=&#34;org-string&#34;&gt;&#34;darwin&#34;&lt;/span&gt;,
                },
        })
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;darwin should not be supported, it was&#34;&lt;/span&gt;)
        }
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
This is quickly hard to read, there is too much noise on that
test. We setup a whole &lt;code&gt;Node&lt;/code&gt; struct, but the only thing we really
intend to test is the &lt;code&gt;Platform.OS&lt;/code&gt; part. The rest is just required
fields for the function to correctly compile and run.
&lt;/p&gt;

&lt;p&gt;
This is where test builders (and builders in general) comes into
play. In &lt;a href=&#34;http://www.growing-object-oriented-software.com/&#34;&gt;Growing Object-Oriented Software Guided by Tests&lt;/a&gt;, the
Chapter 22 &#34;Constructing Complex Test Data&#34; is exactly about that
and guide us through the why and the how of these builders. The
examples in the book are in &lt;code&gt;java&lt;/code&gt; and uses wisely the
object-oriented nature of the language. Here is an example from the
book.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-java&#34;&gt;&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;I just want an order from a customer that has no post code&lt;/span&gt;
&lt;span class=&#34;org-type&#34;&gt;Order&lt;/span&gt; &lt;span class=&#34;org-variable-name&#34;&gt;order&lt;/span&gt; = &lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;anOrder&lt;/span&gt;()
    .&lt;span class=&#34;org-rainbow-identifiers-identifier-7&#34;&gt;from&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-13&#34;&gt;aCustomer&lt;/span&gt;().&lt;span class=&#34;org-rainbow-identifiers-identifier-11&#34;&gt;with&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-13&#34;&gt;anAddress&lt;/span&gt;().&lt;span class=&#34;org-rainbow-identifiers-identifier-3&#34;&gt;withNotPostCode&lt;/span&gt;()))
    .&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;build&lt;/span&gt;()
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
These builders helps &lt;b&gt;keep tests expressive&lt;/b&gt;, as it&#39;s pretty obvious
when reading it, what we want to test. They remove the &lt;b&gt;visual
noise&lt;/b&gt; you have when building an object (or a &lt;code&gt;struct{}&lt;/code&gt; in Go) and
allows you to put sane default. They also make &lt;b&gt;tests resilient to
change&lt;/b&gt;. If the structure changes, only the builder has to be
updated, not the tests depending on it. They also make default case
really simple to write, and special cases not much more complicated.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-2&#34;&gt;Builder in Go&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-2&#34;&gt;
&lt;p&gt;
The naive way to create builders in &lt;code&gt;go&lt;/code&gt; could be to create a
&lt;code&gt;builder&lt;/code&gt; struct that have methods to construct the final struct and
a &lt;code&gt;build&lt;/code&gt; method. Let&#39;s see how it looks.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;ANode&lt;/span&gt;() *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &amp;amp;&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;node&lt;/span&gt;: &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;{
                        &lt;span class=&#34;org-constant&#34;&gt;Name&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;node&#34;&lt;/span&gt;,
                        &lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Other defaults&lt;/span&gt;
                },
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt; &lt;span class=&#34;org-keyword&#34;&gt;struct&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt; &amp;amp;&lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;Node&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt;) &lt;span class=&#34;org-function-name&#34;&gt;Build&lt;/span&gt;() *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt;) &lt;span class=&#34;org-function-name&#34;&gt;Hostname&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-3&#34;&gt;hostname&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;Hostname&lt;/span&gt; = &lt;span class=&#34;org-rainbow-identifiers-identifier-3&#34;&gt;hostname&lt;/span&gt;
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt;) &lt;span class=&#34;org-function-name&#34;&gt;Name&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-3&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;Name&lt;/span&gt; = &lt;span class=&#34;org-rainbow-identifiers-identifier-3&#34;&gt;name&lt;/span&gt;
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt;) &lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;) *&lt;span class=&#34;org-type&#34;&gt;NodeBuilder&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;Platform&lt;/span&gt; = &lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt;
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
This looks decent, and using it is pretty straightforward. At least
it make building the &lt;code&gt;struct&lt;/code&gt; more expressive, less noisy and
resilient to change. We can update the previous test as follow.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateLinuxIsSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;ANode&lt;/span&gt;().&lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(&amp;amp;&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x86_64&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;:           &lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;,
        }).&lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;())
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; !&lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;linux should be supported, it was not&#34;&lt;/span&gt;)
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateDarwinIsNotSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;ANode&lt;/span&gt;().&lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(&amp;amp;&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x86_64&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;:           &lt;span class=&#34;org-string&#34;&gt;&#34;darwin&#34;&lt;/span&gt;,
        }).&lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;())
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;darwin should not be supported, it was&#34;&lt;/span&gt;)
        }
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
There is room for improvement :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;There is still some noise, mainly &lt;code&gt;build()&lt;/code&gt; and the platform
&lt;code&gt;struct&lt;/code&gt;, as it still shows too much.
&lt;/li&gt;
&lt;li&gt;It&#39;s not that extensible yet. If you want to update the &lt;code&gt;Node&lt;/code&gt; a
certain way that the builder is not written for, you have to
update the builder.
&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;NodeBuilder&lt;/code&gt; struct feels a little empty, it&#39;s just there to
hold on the &lt;code&gt;Node&lt;/code&gt; being constructed until it is &lt;code&gt;build&lt;/code&gt;.
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
One improvement we could make is to have a &lt;code&gt;Platform&lt;/code&gt; builder, even
if it&#39;s a small struct here. Let&#39;s do that in the same way we did
with &lt;code&gt;Node&lt;/code&gt;.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;APlatform&lt;/span&gt;() *&lt;span class=&#34;org-type&#34;&gt;PlatformBuilder&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &amp;amp;&lt;span class=&#34;org-type&#34;&gt;PlatformBuilder&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;platform&lt;/span&gt;: &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                        &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x64_86&#34;&lt;/span&gt;,
                        &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;,
                },
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;PlatformBuilder&lt;/span&gt; &lt;span class=&#34;org-keyword&#34;&gt;struct&lt;/span&gt;{
        &lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt; *&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;Platform&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;PlatformBuilder&lt;/span&gt;) &lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;() *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;PlatformBuilder&lt;/span&gt;) &lt;span class=&#34;org-function-name&#34;&gt;OS&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;os&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) *&lt;span class=&#34;org-type&#34;&gt;PlatformBuilder&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;OS&lt;/span&gt; = &lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;os&lt;/span&gt;
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;b&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
And our tests becomes üêª.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateLinuxIsSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;ANode&lt;/span&gt;().&lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(
                &lt;span class=&#34;org-function-name&#34;&gt;APlatform&lt;/span&gt;().&lt;span class=&#34;org-function-name&#34;&gt;OS&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;).&lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;()
        ).&lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;())
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; !&lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;linux should be supported, it was not&#34;&lt;/span&gt;)
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateDarwinIsNotSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;ANode&lt;/span&gt;().&lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(
                &lt;span class=&#34;org-function-name&#34;&gt;APlatform&lt;/span&gt;().&lt;span class=&#34;org-function-name&#34;&gt;OS&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;darwin&#34;&lt;/span&gt;).&lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;()
        ).&lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;())
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;darwin should not be supported, it was&#34;&lt;/span&gt;)
        }
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
It does not really improve the visual noise as there is now quite a
few duplication : several &lt;code&gt;build&lt;/code&gt;, &lt;code&gt;APlatform&lt;/code&gt; inside &lt;code&gt;Platform&lt;/code&gt;, ‚Ä¶
It is a small improvement on readability but not that much compared
to the previous one. This is were the Go language features comes
into play.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-3&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-3&#34;&gt;Functional arguments to the rescue&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-3&#34;&gt;
&lt;p&gt;
Go has two interesting feature that are going to be useful here.
&lt;/p&gt;

&lt;p&gt;
First, a function in Go is a type on its own and thus is considered
a &lt;i&gt;first class citizen&lt;/i&gt;. It means it&#39;s possible to pass a function
as argument, or define a variable that holds it.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;ApplyTo&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;, &lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(&lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;fn&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;s&lt;/span&gt;)
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;world&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;fmt&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Sprintf&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;%s, world!&#34;&lt;/span&gt;, &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;s&lt;/span&gt;)
}

&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Usage&lt;/span&gt;
&lt;span class=&#34;org-rainbow-identifiers-identifier-1&#34;&gt;a&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;ApplyTo&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;hello&#34;&lt;/span&gt;, &lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;world&lt;/span&gt;)
&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;a == &#34;hello, world!&#34;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
The second feature that comes into play here, is the possiblity to
have &lt;i&gt;variadic&lt;/i&gt; functions. A variadic function is a function that
takes a variable number of arguments (from &lt;code&gt;0&lt;/code&gt; to any number of
argument).
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;Print&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;strs&lt;/span&gt; ...&lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt;) &lt;span class=&#34;org-type&#34;&gt;string&lt;/span&gt; {
        &lt;span class=&#34;org-keyword&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;_&lt;/span&gt;, &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;s&lt;/span&gt; := &lt;span class=&#34;org-keyword&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;strs&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;fmt&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Println&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;s&lt;/span&gt;)
        }
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
As we are going to see below, combining these two feature makes our
builders pretty easy to write and to use with simple case, while
staying very customizable, even outside of the builder. This is
really well described in a talk from Dave Cheney : &lt;a href=&#34;https://www.youtube.com/watch?v=24lFtGHWxAQ&amp;index=15&amp;list=PLMW8Xq7bXrG58Qk-9QSy2HRh2WVeIrs7e&#34;&gt;Functional
options for friendly APIs&lt;/a&gt; (&lt;a href=&#34;https://dave.cheney.net/2014/10/17/functional-options-for-friendly-apis&#34;&gt;transcription&lt;/a&gt;).
&lt;/p&gt;

&lt;p&gt;
Let&#39;s apply that to our new builders.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;Node&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;nodeBuilders&lt;/span&gt; ...&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(*&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;)) *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt; := &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Name&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;node&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Other defaults&lt;/span&gt;
        }

        &lt;span class=&#34;org-keyword&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;_&lt;/span&gt;, &lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;build&lt;/span&gt; := &lt;span class=&#34;org-keyword&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;nodeBuilders&lt;/span&gt; {
                &lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt;)
        }

        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node&lt;/span&gt;
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;platformBuilders&lt;/span&gt; ...&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(*&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;)) *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt; {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt; := &amp;amp;&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;{
                &lt;span class=&#34;org-constant&#34;&gt;Architecture&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;x64_86&#34;&lt;/span&gt;,
                &lt;span class=&#34;org-constant&#34;&gt;OS&lt;/span&gt;: &lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;,
        }

        &lt;span class=&#34;org-keyword&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;_&lt;/span&gt;, &lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;build&lt;/span&gt; := &lt;span class=&#34;org-keyword&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;platformBuilders&lt;/span&gt; {
                &lt;span class=&#34;org-function-name&#34;&gt;build&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt;)
        }

        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-14&#34;&gt;platform&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
And that is it for the actual builder code. It is &lt;b&gt;small&lt;/b&gt; and
simple, there is &lt;b&gt;no more &lt;code&gt;NodeBuilder&lt;/code&gt;&lt;/b&gt; struct, and this is highly
extensible. Let&#39;s see how to use it.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;a default node&lt;/span&gt;
&lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;node1&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Node&lt;/span&gt;()
&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;a node with a specific Hostname&lt;/span&gt;
&lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;node2&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Node&lt;/span&gt;(&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;Hostname&lt;/span&gt; = &lt;span class=&#34;org-string&#34;&gt;&#34;custom-hostname&#34;&lt;/span&gt;
})
&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;a node with a specific name and platform&lt;/span&gt;
&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;node3&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Node&lt;/span&gt;(&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;Name&lt;/span&gt; = &lt;span class=&#34;org-string&#34;&gt;&#34;custom-name&#34;&lt;/span&gt;
}, &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;Platform&lt;/span&gt; = &lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;) {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;OS&lt;/span&gt; = &lt;span class=&#34;org-string&#34;&gt;&#34;darwin&#34;&lt;/span&gt;
        })
})
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
The last step is to define some &lt;i&gt;function builder&lt;/i&gt; for common or
widely used customization, to make this &lt;b&gt;expressive&lt;/b&gt;. And let
complex, &lt;i&gt;one-time&lt;/i&gt; function builder in the end of the user. Now our
tests looks like.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-go&#34;&gt;&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateLinuxIsSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;Node&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;WithPlatform&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;Linux&lt;/span&gt;)))
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; !&lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;linux should be supported, it was not&#34;&lt;/span&gt;)
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;TestValidateDarwinIsNotSupported&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;testing.T&lt;/span&gt;) {
        &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; := &lt;span class=&#34;org-function-name&#34;&gt;Validate&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;Node&lt;/span&gt;(&lt;span class=&#34;org-function-name&#34;&gt;WithPlatform&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;Darwin&lt;/span&gt;)))
        &lt;span class=&#34;org-keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-6&#34;&gt;valid&lt;/span&gt; {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;.&lt;span class=&#34;org-function-name&#34;&gt;Fatal&lt;/span&gt;(&lt;span class=&#34;org-string&#34;&gt;&#34;darwin should not be supported, it was&#34;&lt;/span&gt;)
        }
}

&lt;span class=&#34;org-comment-delimiter&#34;&gt;// &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Function builders&lt;/span&gt;
&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;WithPlatform&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;builders&lt;/span&gt; ...&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(*&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;)) &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;) {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Node&lt;/span&gt;) {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;n&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;Platform&lt;/span&gt; = &lt;span class=&#34;org-function-name&#34;&gt;Platform&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;builders&lt;/span&gt;...)
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;Linux&lt;/span&gt;() &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;) {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;) {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;OS&lt;/span&gt; = &lt;span class=&#34;org-string&#34;&gt;&#34;linux&#34;&lt;/span&gt;
        }
}

&lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;org-function-name&#34;&gt;Darwin&lt;/span&gt;() &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt; (&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;) {
        &lt;span class=&#34;org-keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;org-keyword&#34;&gt;func&lt;/span&gt;(&lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt; *&lt;span class=&#34;org-type&#34;&gt;Platform&lt;/span&gt;) {
                &lt;span class=&#34;org-rainbow-identifiers-identifier-10&#34;&gt;p&lt;/span&gt;.&lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;OS&lt;/span&gt; = &lt;span class=&#34;org-string&#34;&gt;&#34;darwin&#34;&lt;/span&gt;
        }
}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
The intent is now clear. It&#39;s readable and still resilient to
change. The code &lt;code&gt;Node(WithPlatform(Linux))&lt;/code&gt; is easy to understand
for a human. It makes what are the &lt;i&gt;tested&lt;/i&gt; characteristics of
&lt;code&gt;struct&lt;/code&gt; pretty clear. It&#39;s easy to combine multiple builders as the
&lt;code&gt;WithPlatform&lt;/code&gt; function shows üëº. It&#39;s also easy to create a
&lt;i&gt;function builder&lt;/i&gt;, even in a different package (as long as the ways
to modify the struct are exported) and complex or &lt;i&gt;on-off&lt;/i&gt; builder
can be embedded in the function call (&lt;code&gt;Node(func(n *Node) { // ‚Ä¶
  })&lt;/code&gt;).
&lt;/p&gt;

&lt;p&gt;
In summary, using these types of builder have several advantages :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;tests are &lt;b&gt;easy to read&lt;/b&gt;, and reduce the visual noise
&lt;/li&gt;
&lt;li&gt;tests are &lt;b&gt;resilient to change&lt;/b&gt;
&lt;/li&gt;
&lt;li&gt;builders are &lt;b&gt;easy to compose&lt;/b&gt; and very extensible
&lt;/li&gt;
&lt;li&gt;builders could even be &lt;b&gt;shared&lt;/b&gt; with production code as there is
nothing tied to &lt;code&gt;testing&lt;/code&gt;.
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Firefox hidden feature ‚Äî places in bookmarks</title>
      <link>http://vincent.demeester.fr/posts/2016-09-18-firefox-places-and-bookmarks/</link>
      <pubDate>Mon, 19 Sep 2016 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2016-09-18-firefox-places-and-bookmarks/</guid>
      <description>&lt;p&gt;
Je r√©alise que j&#39;utilise Firefox depuis bien plus de 10 ans maintenant
(on doit √™tre √† minimum 15 ans en fait‚Ä¶). Et je me souviens d&#39;un temps
o√π je souhaitais rendre mes &lt;i&gt;bookmarks&lt;/i&gt; (marque-pages üëº)
dynamique. Apr√®s tout ils existent de base dans Firefox (e.g. &lt;code&gt;Most
visited&lt;/code&gt;), il doit donc √™tre possible d&#39;en faire soit m√™me.
&lt;/p&gt;

&lt;p&gt;
Il fut un temps o√π c&#39;√©tait facile √† mettre en place ‚Äî ouvrir la
gestion des marques pages, chercher quelque chose et &lt;i&gt;cliquer&lt;/i&gt; sur le
bouton &lt;code&gt;save&lt;/code&gt; pour sauvegarder cette recherche en tant de bookmark
dynamique.
&lt;/p&gt;

&lt;p&gt;
&lt;span class=&#34;underline&#34;&gt;Note&lt;/span&gt;: comme j&#39;avais grave lutt√© √† l&#39;√©poque, et que j&#39;ai encore lutt√©
cette fois ci, cet article va me servir de pense-b√™te pour le futur.
&lt;/p&gt;

&lt;div id=&#34;outline-container-sec-1&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-1&#34;&gt;Places&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-1&#34;&gt;
&lt;p&gt;
C&#39;est le petit nom que poss√®de cette fonctionnalit√© dans le c≈ìur de
Firefox. C&#39;est un nom relativement commun, du coup √ßa n&#39;aide pas trop
la recherche d&#39;information‚Ä¶ Le meilleur endroit pour se documenter
reste alors le &lt;a href=&#34;https://developer.mozilla.org&#34;&gt;Mozilla Developer Network&lt;/a&gt;‚Ä¶ 
&lt;/p&gt;

&lt;p&gt;
Et ce qu&#39;on peut lire sur cette &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Mozilla/Tech/Places&#34;&gt;page&lt;/a&gt; c&#39;est :
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
Places is the bookmarks and history management system introduced in
Firefox 3. It offers increased flexibility and complex querying to
make handling the places the user goes easier and more
convenient. It also includes new features including favicon storage
and the ability to annotate pages with arbitrary information.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
C&#39;est donc un m√©canisme interne qui permet d&#39;annoter des pages
(bookmarks, history, ‚Ä¶) et surtout un &lt;i&gt;requ√™tage&lt;/i&gt; plus complexe et
flexible que le syst√®me pr√©c√©dent. On peut noter √©galement que c&#39;est
arriv√© en version 3, et qu&#39;√† la date du jour, la version courante de
Firefox est la 48. En esp√©rant donc que ce soit toujours le syst√®me en
place (&lt;i&gt;spoiler alert: √ßa a l&#39;air d&#39;√™tre le cas&lt;/i&gt;).
&lt;/p&gt;


&lt;div class=&#34;figure&#34;&gt;
&lt;p&gt;&lt;img src=&#34;images/2016/firefox-place-awesomebar-example.png&#34; alt=&#34;firefox-place-awesomebar-example.png&#34; /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;figure-number&#34;&gt;Figure 1:&lt;/span&gt; An example of places usage in the awesome bar&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
Les petits &lt;i&gt;encarts&lt;/i&gt; en noir ci-dessus sont un exemple de ces
&lt;i&gt;places&lt;/i&gt;. Ici il s&#39;agit des &lt;b&gt;tags&lt;/b&gt; qui ont √©t√©s apposer sur les
bookmarks ; on voit d&#39;ailleurs que ce sont des bookmarks puisqu&#39;ils
ont une petite √©toile √† c√¥t√© du joli petit &lt;code&gt;favicon&lt;/code&gt;. Firefox a pris
les termes que j&#39;ai √©crit dans la barre d&#39;url et √† faire une recherche
dans les &lt;i&gt;places&lt;/i&gt; suivant diff√©rents crit√®res (l&#39;url, les tags pour
les bookmarks, ‚Ä¶).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-2&#34;&gt;Places dans les bookmarks&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-2&#34;&gt;
&lt;p&gt;
L&#39;id√©e est d&#39;utiliser cette fonctionnalit√© pour faire des bookmarks
dynamique. Pour poser un peu de contexte, j&#39;utilise surtout la
bookmark toolbar pour acc√©der √† des pages dont j&#39;ai besoin (au hasard,
le webmail du boulot, une page pr√©cise d&#39;issues sur github, des pages
de guide/r√©f√©rence/manuel sur des outils que j&#39;utilise‚Ä¶) et √©galement
en mode &lt;i&gt;read that later&lt;/i&gt;.
&lt;/p&gt;


&lt;div class=&#34;figure&#34;&gt;
&lt;p&gt;&lt;img src=&#34;images/2016/firefox-place-bookmark-toolbar.png&#34; alt=&#34;firefox-place-bookmark-toolbar.png&#34; /&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;figure-number&#34;&gt;Figure 2:&lt;/span&gt; Ma &lt;i&gt;bookmark&lt;/i&gt; toolbar&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
Par exemple, dans mon dossier &lt;code&gt;inbox&lt;/code&gt;, il y a plusieurs sous-dossiers
(en fait des dossiers dynamique, mais j&#39;y reviendrais plus tard),
genre &lt;code&gt;docker&lt;/code&gt;, &lt;code&gt;nix&lt;/code&gt;, &lt;code&gt;golang&lt;/code&gt;, &lt;code&gt;java&lt;/code&gt;, etc. Tout ce qui &lt;i&gt;tra√Æne&lt;/i&gt;
dans &lt;code&gt;inbox&lt;/code&gt; est √† lire ou √† trier (&lt;code&gt;inbox&lt;/code&gt; se r√©f√®re un peu √† ce que
l&#39;on peut voir avec GTD). Chaque sous dossier √©tait une sorte de
&lt;i&gt;filtre&lt;/i&gt; par projet, langage ou /whatever/‚Ä¶
&lt;/p&gt;

&lt;p&gt;
Nous allons donc ruser un peu et utiliser les &lt;i&gt;places&lt;/i&gt; dans nos
bookmarks pour en faire des dossiers dynamique, √† l&#39;instar de &lt;code&gt;Most
Visited&lt;/code&gt;. Pour se faire, il faut d√©j√† trouver un peu de documentation
sur l&#39;utilisation de ces fameuses &lt;i&gt;places&lt;/i&gt; au sein de bookmarks ‚Äî et
√ßa p√®che un peu‚Ä¶ Toujours sur le &lt;a href=&#34;https://developer.mozilla.org&#34;&gt;Mozilla Developer Network&lt;/a&gt;, une page
&lt;i&gt;un peu cach√©&lt;/i&gt; nous r√©v√®le quelques informations : &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Mozilla/Tech/Places/Places_query_URIs&#34;&gt;Places query URIs&lt;/a&gt;.
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
You can use a &lt;code&gt;place&lt;/code&gt; URI as a bookmark. For example, if you right-click
on the toolbar and choose &#34;New Bookmark,&#34; you can enter a place URI
there to create a new query on your toolbar that, when clicked, will
reveal a popup containing the results of the query.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
Victoire &lt;code&gt;\o/&lt;/code&gt;, il &lt;i&gt;suffit&lt;/i&gt; de cr√©er un bookmark avec comme &lt;code&gt;URI&lt;/code&gt;
une &lt;code&gt;place:‚Ä¶&lt;/code&gt; URI et c&#39;est gagn√©. Ainsi, un bookmark avec comme &lt;code&gt;URI&lt;/code&gt;
&lt;code&gt;place:terms=nixos&lt;/code&gt; me retournera un dossier dynamique  qui contiens
tous les liens (&lt;i&gt;history&lt;/i&gt;, &lt;i&gt;bookmarks&lt;/i&gt;, ‚Ä¶) qui contiennent le mot
&lt;code&gt;nixos&lt;/code&gt; ‚Äî en gros l&#39;√©quivalent de ce que nous aurions si nous tapions
&lt;code&gt;nixos&lt;/code&gt; dans la &lt;i&gt;awesomebar&lt;/i&gt;.
&lt;/p&gt;

&lt;p&gt;
Si l&#39;on regarde d&#39;un peu plus pr√®s &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Mozilla/Tech/Places/Places_query_URIs&#34;&gt;Places query URIs&lt;/a&gt;, il y a une
longue liste de param√®tres possible. Il y en a pour presque tous les
go√ªts : le temps (utile pour afficher l&#39;historique, mais pas trop),
les visites, le type de &lt;i&gt;place&lt;/i&gt; (&lt;i&gt;bookmark&lt;/i&gt;, &lt;i&gt;history&lt;/i&gt;, ‚Ä¶), le
domaine de l&#39;√©l√©ment, le dossier dans lequel il se trouve, l&#39;&lt;code&gt;URI&lt;/code&gt;,
les tags‚Ä¶ j&#39;en passe et des meilleurs.
&lt;/p&gt;

&lt;p&gt;
Si par exemple, je souhaite n&#39;afficher que les pages visit√©s
aujourd&#39;hui, tri√©s par nombre de visites et limit√©s √† 10 r√©sultats, je
peux mettre comme &lt;code&gt;URI&lt;/code&gt; :
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-http&#34;&gt;place:queryType=0&amp;amp;sort=8&amp;amp;maxResults=10&amp;amp;beginTimeRef=1&amp;amp;beginTime=0
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Et on obtiens √ßa :
&lt;/p&gt;


&lt;div class=&#34;figure&#34;&gt;
&lt;p&gt;&lt;img src=&#34;images/2016/firefox-place-most-visited-today.png&#34; alt=&#34;firefox-place-most-visited-today.png&#34; /&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
Mais revenons √† nos moutons, moi ce que je souhaite, c&#39;est faire des
dossiers dynamique par &lt;code&gt;tag&lt;/code&gt;, i.e. les tags que l&#39;on peut setter
lorsqu&#39;on ajoute un bookmark. Et √ßa tombe bien, un des param√®tres
s&#39;appelle &lt;code&gt;tag&lt;/code&gt; et fait exactement √ßa. Je souhaite √©galement pouvoir
faire des &lt;code&gt;ET&lt;/code&gt; sur mes tags ‚Äî par exemple, dans mon dossier
&lt;code&gt;inbox/nixos&lt;/code&gt; je veux tous les bookmarks qui sont taggu√©s &lt;code&gt;inbox&lt;/code&gt; &lt;b&gt;et&lt;/b&gt;
&lt;code&gt;nixos&lt;/code&gt;. Et c&#39;est simple, il suffit de lui donner les deux.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-http&#34;&gt;place:tag=inbox&amp;amp;tag=nixos
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-3&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-3&#34;&gt;R√©trospective&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-3&#34;&gt;
&lt;p&gt;
Voil√†, vous avez maintenant tout ce qu&#39;il faut pour faire des dossiers
dynamiques dans vos bookmarks Firefox et vous organiser au mieux (
&lt;i&gt;ou pas&lt;/i&gt;). Quelques points √† noter :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;L&#39;ic√¥ne du dossier dynamique ‚Äî ou m√™me la fonctionnalit√© √†
proprement parler= n&#39;appara√Æt pas de suite. Il faut parfois
red√©marrez Firefox pour profiter du nouveau dossier dynamique.
&lt;/li&gt;
&lt;li&gt;Une fois que le bookmark est vu comme un dossier dynamique, il n&#39;est
plus possible d&#39;√©diter l&#39;&lt;code&gt;URI&lt;/code&gt;. Si vous voulez en changer un, il
faut tout bonnement le recr√©er.
&lt;/li&gt;
&lt;li&gt;Bien que ce soit une fonctionnalit√© que je trouve g√©niale, il y a
peu de &lt;i&gt;presse&lt;/i&gt; sur le sujet et √† mon grand √©tonnement, aucun plugin
pour g√©rer √ßa plus proprement. Est-ce le signe qu&#39;un jour ce ne sera
plus supporter, je n&#39;en ai aucune id√©e.
&lt;/li&gt;
&lt;li&gt;Un point tr√®s positif si vous utilisez Firefox Sync : √ßa marche bien
(pas vraiment √©tonnant en fait), ces dossiers se synchronise comme
le reste et seront donc √† disponible quelque soit l&#39;appareil sur lequel
vous utilisez firefox &lt;code&gt;\o/&lt;/code&gt;.
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Gestion de configuration : introduction</title>
      <link>http://vincent.demeester.fr/posts/2015-07-31-config-managment-intro/</link>
      <pubDate>Fri, 31 Jul 2015 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2015-07-31-config-managment-intro/</guid>
      <description>&lt;p&gt;
Cela doit faire au moins 2 ans que je souhaite partager la fa√ßon dont
je g√®re mes configurations (en anglais &lt;i&gt;dotfiles&lt;/i&gt;). Comme j&#39;ai
longtemps repouss√© l&#39;√©ch√©ance, probablement de peur d&#39;avoir un roman √†
√©crire, je vais en faire une s√©rie de petits billets de blog dont
celui-ci est l&#39;introduction. Nous y aborderons donc mon besoin, et mes
choix.
&lt;/p&gt;

&lt;div id=&#34;outline-container-sec-1&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-1&#34;&gt;Besoin(s)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-1&#34;&gt;
&lt;p&gt;
En bon &lt;b&gt;geek&lt;/b&gt; que je suis, je suis fan des &lt;i&gt;dotfiles&lt;/i&gt;. Les &lt;i&gt;dotfiles&lt;/i&gt;
‚Äî fichiers de configurations ‚Äî sont de petits fichiers, habituellement
dans notre dossier personnel (votre &lt;i&gt;$HOME&lt;/i&gt;), qui nous permettent de
param√©trer et personnaliser nos outils de tous les jours. C&#39;est
principalement vrai pour des outils en ligne de commande ‚Äî et √ßa tombe
bien, j&#39;adore ‚Äî mais pas uniquement limit√© √† ces derniers.
&lt;/p&gt;

&lt;p&gt;
Je vais faire un tr√®s petit apart√© sur le pourquoi de cette
personnalisation :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;C&#39;est &lt;b&gt;fun&lt;/b&gt; √† faire et c&#39;est relativement important de mon point de vue.
&lt;/li&gt;
&lt;li&gt;C&#39;est &lt;b&gt;√©ducatif&lt;/b&gt; ou formateur ; on lit les documentations de nos
outils, leurs fonctionnalit√©s un peu cach√©es. On va souvent d√©couvrir
un peu la philosophie dans laquelle l&#39;outil a √©t√© cr√©√©. C&#39;est en
mettant les &lt;i&gt;mains dans le cambouis&lt;/i&gt; et en &lt;i&gt;foutant un gros bordel&lt;/i&gt;
que j&#39;ai le plus appris (√ßa va du &lt;i&gt;langage&lt;/i&gt; shell et d&#39;autres
langages de scripts, de POSIX, au noyau linux ou encore au LISP avec
GNU/Emacs).
&lt;/li&gt;
&lt;li&gt;Cela fait &lt;b&gt;gagner du temps&lt;/b&gt; et de mani√®re non n√©gligeable. Je suis
n√© &lt;span class=&#34;underline&#34;&gt;courageux mais terriblement fain√©ant&lt;/span&gt; (et oui c&#39;est possible
&lt;code&gt;:-P&lt;/code&gt;), j&#39;aime pas trop me r√©p√©ter quand √ßa devient un peu compliqu√©
/ chiant (e.g. &lt;code&gt;docker run monimage args&lt;/code&gt; √ßa va, &lt;code&gt;docker run&lt;/code&gt; avec
&lt;code&gt;-v /tmp:/tmp -v /var/run/docker.socket:/var/run/docker.socket [‚Ä¶]&lt;/code&gt;
et &lt;code&gt;run monimage arg1 arg2 arg3 [‚Ä¶]&lt;/code&gt; moins d√©j√†).
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
Mais revenons √† nos moutons et faisons une petite liste de mes besoins, un
peu en vrac :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;J&#39;ai plusieurs ordinateurs (laptop/desktop/serveurs) et je souhaite
avoir mes configurations &lt;b&gt;synchronis√©es&lt;/b&gt; entre ceux-ci ‚Äî et ce de
mani√®re simple, c&#39;est √† dire &lt;i&gt;une commande √† ex√©cuter&lt;/i&gt;.
&lt;/li&gt;
&lt;li&gt;C&#39;est li√© au point pr√©c√©dent mais, je ne &lt;i&gt;peux pas vivre&lt;/i&gt; sans
outil de gestion de version, comme &lt;b&gt;git&lt;/b&gt;. Il me faut donc un outil
ou ensemble d&#39;outil qui sache utiliser des outils de gestion de
version &lt;i&gt;du march√©&lt;/i&gt;.


&lt;div class=&#34;figure&#34;&gt;
&lt;p&gt;&lt;img src=&#34;./img/git-all-the-thing.jpg&#34; alt=&#34;git-all-the-thing.jpg&#34; /&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;

&lt;li&gt;En fonction de mes ordinateurs, mes besoins de configuration
changent. Il me faut donc un outil &lt;b&gt;flexible&lt;/b&gt; qui me permette de dire
par exemple : sur ce PC j&#39;ai un serveur &lt;code&gt;Xorg&lt;/code&gt; donc j&#39;ai besoin de
mes configuration xorg, de celle de mon &lt;i&gt;window manager&lt;/i&gt;, etc. ‚Äî et
inversement sur ce serveur j&#39;ai besoin de python et haskell mais pas
de xorg..
&lt;/li&gt;
&lt;li&gt;Je ne souhaites pas avoir √† faire des liens symboliques, ou de
scripts d&#39;installation. Je trouves que √ßa rends les choses plus
compliqu√©es. Du coup il faut que je puisse avoir &lt;b&gt;plusieurs &lt;i&gt;d√©p√¥ts
de configuration&lt;/i&gt;&lt;/b&gt; (repository) qui pointent au m√™me endroit, sans
que ce soit le bordel.
&lt;/li&gt;
&lt;li&gt;Le &lt;b&gt;partage&lt;/b&gt; est important pour moi. Il en d√©coule deux choses :
&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;Il faut que je puisse documenter un peu mon repository, avec un
bon vieux &lt;code&gt;README&lt;/code&gt; ; sans que chaque &lt;code&gt;README&lt;/code&gt; se marche dessus.
&lt;/li&gt;
&lt;li&gt;Il y a quelques &lt;b&gt;informations&lt;/b&gt; qui sont &lt;b&gt;personnelles&lt;/b&gt;, comme par
exemple les cl√©s ssh. Il me faut donc √™tre capable d&#39;avoir des
&lt;i&gt;d√©p√¥ts publiques&lt;/i&gt; et des &lt;i&gt;d√©p√¥ts priv√©s&lt;/i&gt;. C&#39;est grandement facilit√©
par l&#39;aspect &lt;i&gt;flexibilit√©&lt;/i&gt; &lt;code&gt;:-)&lt;/code&gt;.
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Un bonus que je souhaite, est de pouvoir disposer de &lt;b&gt;hooks&lt;/b&gt;, un peu
√† la mani√®re de git (voir &lt;a href=&#34;https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks&#34;&gt;ici&lt;/a&gt;). L&#39;id√©e est de pouvoir &lt;b&gt;g√©n√©rer&lt;/b&gt; un
fichier de configuration √† partir d&#39;un ensemble de fichiers qui
viendraient de diff√©rents d√©p√¥ts. Le meilleur exemple que je peux
donner c&#39;est &lt;code&gt;~/.ssh/config&lt;/code&gt; dans lequel je vais y mettre des bouts
publiques que je souhaites partager (comme le &lt;code&gt;Host *&lt;/code&gt; avec des
trucs cool comme &lt;code&gt;ControlPersist&lt;/code&gt;, on en parlera plus tard) et des
bouts priv√©s (mes hosts priv√©s, avec mes configurations de
&lt;i&gt;rebonds&lt;/i&gt;, etc..).
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
Cette liste a mis un certain temps √† se former dans ma t√™te, mais une
fois qu&#39;elle √©tait form√©e, j&#39;ai pu assez facilement faire des choix.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-2&#34;&gt;Choix&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-2&#34;&gt;
&lt;p&gt;
Deux outils et un peu d&#39;organisation permettent de r√©pondre √† mes
besoins. Les deux outils sont &lt;code&gt;vcsh&lt;/code&gt; et &lt;code&gt;myrepos&lt;/code&gt; (anciennement appel√©
&lt;code&gt;mr&lt;/code&gt;), fait par respectivement Richard Hartmann et Joey Hess (tout
deux assez impliqu√© dans la communaut√© Debian).
&lt;/p&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2-1&#34; class=&#34;outline-3&#34;&gt;
&lt;h3 id=&#34;sec-2-1&#34;&gt;vcsh&lt;/h3&gt;
&lt;div class=&#34;outline-text-3&#34; id=&#34;text-2-1&#34;&gt;
&lt;p&gt;
En un mot, &lt;a href=&#34;https://github.com/RichiH/vcsh&#34;&gt;vcsh&lt;/a&gt; permet de maintenir plusieurs &lt;i&gt;repository&lt;/i&gt; &lt;a href=&#34;http://git-scm.com/&#34;&gt;git&lt;/a&gt; dans
un seul dossier. Par d√©faut tous les &lt;i&gt;repository&lt;/i&gt; git maintenus par
&lt;code&gt;vcsh&lt;/code&gt; pointent vers le dossier &lt;code&gt;$HOME&lt;/code&gt;, mais il est possible
d&#39;utiliser un autre dossier.
&lt;/p&gt;

&lt;p&gt;
L&#39;id√©e est de pouvoir disposer de plusieurs repository par &lt;i&gt;famille
d&#39;application&lt;/i&gt;, par exemple &lt;code&gt;vim&lt;/code&gt;, &lt;code&gt;ssh&lt;/code&gt;, &lt;code&gt;emacs&lt;/code&gt;, &lt;code&gt;zsh&lt;/code&gt;, etc. Cela
permet ainsi d&#39;avoir diff√©rents ensemble de configurations sur
diff√©rentes machines et pour diff√©rents utilisateurs. Cela apporte
une tr√®s grande flexibilit√© et facilite le partage de configuration
(au sein d&#39;une entreprise ou d&#39;un projet par exemple) tout en
laissant la place √† la d√©finition de configuration(s)
personnalis√©(s).
&lt;/p&gt;

&lt;p&gt;
En bonus, &lt;code&gt;vcsh&lt;/code&gt; supporte un syst√®me de hook, permettant d&#39;ex√©cuter
des commandes √† diff√©rents moments du &lt;i&gt;workflow&lt;/i&gt; ‚Äî c&#39;est la seule
partie qui manquant √† &lt;code&gt;vcsh&lt;/code&gt; de mon point de vue alors j&#39;y ai
apport√© ma petit pierre.
&lt;/p&gt;

&lt;p&gt;
&lt;code&gt;vcsh&lt;/code&gt; est la cl√© de vo√ªte de ma gestion de configuration. Sans le
travail formidable de &lt;a href=&#34;http://richardhartmann.de/&#34;&gt;Richard Hartmann&lt;/a&gt;, je ne sais pas comment je
ferais..
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2-2&#34; class=&#34;outline-3&#34;&gt;
&lt;h3 id=&#34;sec-2-2&#34;&gt;myrepos&lt;/h3&gt;
&lt;div class=&#34;outline-text-3&#34; id=&#34;text-2-2&#34;&gt;
&lt;p&gt;
En un mot, &lt;a href=&#34;https://myrepos.branchable.com/&#34;&gt;myrepos&lt;/a&gt; est un outil permettant de &lt;i&gt;g√©rer&lt;/i&gt; plusieurs
repository (git, subversion, mercurial, ‚Ä¶) avec une seule
commande : &lt;code&gt;mr&lt;/code&gt;. C&#39;est simple et efficace :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;&lt;code&gt;mr u&lt;/code&gt; (ou &lt;code&gt;mr update&lt;/code&gt;) pour r√©cup√©rer les derni√®res modifications (&lt;code&gt;git pull&lt;/code&gt;,
&lt;code&gt;svn up&lt;/code&gt;, ‚Ä¶).
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mr -d $HOME/.config u&lt;/code&gt; pour r√©cup√©rer les derni√®res modifications
des repository qui sont dans &lt;code&gt;$HOME/.config&lt;/code&gt;.
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mr -j 6 u&lt;/code&gt; pour parall√©liser la r√©cup√©ration (ici 6 jobs en parall√®le).
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mr p&lt;/code&gt; pour pousser des modifications (&lt;code&gt;git push&lt;/code&gt;, ‚Ä¶).
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mr run&lt;/code&gt; pour lancer un commande (j&#39;utilise √ßa tous les jours).
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
Il est √©galement possible de personnaliser les commandes √† lancer lors
d&#39;un &lt;i&gt;update&lt;/i&gt; ou autre (toutes les commandes), et m√™me en d√©finir des
nouvelles. Cela se pr√©sente comme suit :
&lt;/p&gt;


&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-conf&#34;&gt;[&lt;span class=&#34;org-type&#34;&gt;foo&lt;/span&gt;]
&lt;span class=&#34;org-variable-name&#34;&gt;checkout&lt;/span&gt; = git@github.com:joeyh/foo.git
&lt;span class=&#34;org-variable-name&#34;&gt;update&lt;/span&gt; = git pull --rebase

[&lt;span class=&#34;org-type&#34;&gt;bar&lt;/span&gt;]
&lt;span class=&#34;org-comment-delimiter&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;This repository has an upstream, which I&#39;ve forked;&lt;/span&gt;
&lt;span class=&#34;org-comment-delimiter&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;set up a remote on checkout.&lt;/span&gt;
&lt;span class=&#34;org-variable-name&#34;&gt;checkout&lt;/span&gt; =
    git clone git@github.com:joeyh/bar.git
    cd bar
    git remote add upstream git@github.com:barbar/bar.git
&lt;span class=&#34;org-comment-delimiter&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;make `mr zap` integrate from upstream&lt;/span&gt;
&lt;span class=&#34;org-variable-name&#34;&gt;zap&lt;/span&gt; =
    git pull upstream
    git merge upstream/master
    git push origin master

[&lt;span class=&#34;org-type&#34;&gt;mystuff&lt;/span&gt;]
&lt;span class=&#34;org-variable-name&#34;&gt;checkout&lt;/span&gt; = git@github.com:joeyh/foo.git
&lt;span class=&#34;org-comment-delimiter&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Skip if the current user is not joey&lt;/span&gt;
&lt;span class=&#34;org-variable-name&#34;&gt;skip&lt;/span&gt; = test `whoami` != joey

[&lt;span class=&#34;org-type&#34;&gt;DEFAULT&lt;/span&gt;]
&lt;span class=&#34;org-comment-delimiter&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Teach mr how to `mr gc` in git repos.&lt;/span&gt;
&lt;span class=&#34;org-variable-name&#34;&gt;git_gc&lt;/span&gt; = git gc &lt;span class=&#34;org-string&#34;&gt;&#34;$@&#34;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Une autre fonctionnalit√© qui m&#39;est totalement indispensable est ce
qu&#39;on appel les &lt;code&gt;fixup(s)&lt;/code&gt;. Il est en effet possible d&#39;ex√©cuter une ou
plusieurs commandes (shell) apr√®s un &lt;code&gt;update&lt;/code&gt; (ou via la commande
&lt;code&gt;fixup&lt;/code&gt;). C&#39;est gr√¢ce √† ce syst√®me la que je g√©n√®re mes fichiers de
configuration en provenance de plusieurs repository (comme
&lt;code&gt;$HOME/.ssh/config&lt;/code&gt; ou encore &lt;code&gt;$HOME/.gitconfig&lt;/code&gt;).
&lt;/p&gt;

&lt;p&gt;
&lt;code&gt;myrepos&lt;/code&gt; est l&#39;exemple de l&#39;outil simple et efficace qui fait une
chose et le fait tr√®s bien, et dont je n&#39;arrive pas √† me passer
&lt;code&gt;:-D&lt;/code&gt;. Je l&#39;utilise √©galement dans plein d&#39;autres cas, comme par
exemple pour mettre √† jour mes &lt;i&gt;forks&lt;/i&gt; de projets open-source.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-3&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-3&#34;&gt;Conclusion&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-3&#34;&gt;
&lt;p&gt;
Et voil√†, c&#39;est tout pour cette introduction &lt;code&gt;;-)&lt;/code&gt;. La prochaine
partie se penchera sur la &lt;b&gt;structure&lt;/b&gt; que j&#39;utilise ainsi que le
repository principal qui est &lt;a href=&#34;https://github.com/vdemeester/vcsh-home&#34;&gt;&lt;b&gt;vcsh-home&lt;/b&gt;&lt;/a&gt;. Dans les parties suivantes
on parlera des autres repository et donc des configurations
sp√©cifiques pour les diff√©rents outils (comme &lt;a href=&#34;https://github.com/vdemeester/sh-config&#34;&gt;sh-config&lt;/a&gt;,
&lt;a href=&#34;https://github.com/vdemeester/emacs-config&#34;&gt;emacs-config&lt;/a&gt; ou encore &lt;a href=&#34;https://github.com/vdemeester/go-config&#34;&gt;go-config&lt;/a&gt;). On parlera aussi probablement de
&lt;code&gt;git-annex&lt;/code&gt; dans le futur.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Docker 1.6 et son √©cosyst√®me</title>
      <link>http://vincent.demeester.fr/posts/2015-06-01-docker-1.6-ecosystem/</link>
      <pubDate>Mon, 01 Jun 2015 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2015-06-01-docker-1.6-ecosystem/</guid>
      <description>&lt;div class=&#34;notice&#34;&gt;Cet article est disponible sur le &lt;a href=&#34;http://blog.zenika.com/&#34;&gt;Blog de Zenika&lt;/a&gt; √† l&#39;adresse suivante : &lt;a href=&#34;http://blog.zenika.com/index.php?post/2015/06/01/Docker-1-6-et-son-ecosysteme&#34;&gt;http://blog.zenika.com/index.php?post/2015/06/01/Docker-1-6-et-son-ecosysteme&lt;/a&gt;. Cet publication me sert de mirroir / sauvegarde.&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-1&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-1&#34;&gt;Introduction&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-1&#34;&gt;
&lt;p&gt;
Le 28 octobre dernier, nous avions parl√© de la sortie de Docker 1.3, des √©volutions entre la version 1 et cette derni√®re et de son √©cosyst√®me. Je vous proposes de remettre √ßa, bient√¥t 6 mois apr√®s, avec un peu le m√™me plan : les principales nouveaut√©s entre la version 1.3 et 1.6 (et il y en a &lt;code&gt;;-)&lt;/code&gt;), l&#39;√©volution de l&#39;√©cosyst√®me qui gravite autour et un peu de &lt;i&gt;social&lt;/i&gt; avec les meetups et √©v√®nements qui se sont pass√©s depuis.
&lt;/p&gt;


&lt;div class=&#34;figure&#34;&gt;
&lt;p&gt;&lt;img src=&#34;./img/docker-16/docker_container_engine_logo.png&#34; alt=&#34;docker_container_engine_logo.png&#34; /&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;
Rappel &lt;i&gt;ultra&lt;/i&gt; rapide, &lt;b&gt;Docker est une plate-forme ouverte √† destination des d√©veloppeurs et administrateurs syst√®mes visant √† faciliter la construction et le d√©ploiement d&#39;applications distribu√©es&lt;/b&gt;. De mani√®re moins marketing, l&#39;id√©e derri√®re Docker est d&#39;automatiser le d√©ploiement d&#39;environnements sous forme de conteneurs l√©gers, portables et auto-suffisants ; les conteneurs permettant d&#39;isoler l&#39;ex√©cution des applications dans des contextes d&#39;ex√©cution. Pour ce
faire, Docker, √©crit en Go, reprend les bases de LXC, utilise les fonctionnalit√©s du noyau Linux (CGroups, Namespaces, ‚Ä¶) et se base initialement sur un syst√®me de fichier &#34;en oignons&#34; AUFS ; D&#39;autres backends sont support√©s √©galement comme BTRFS ou devicemapper (LVM).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-2&#34;&gt;Ovelay filesystem storage driver (1.4.0)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-2&#34;&gt;
&lt;p&gt;
La release 1.4.0 de Docker (et la 1.3.3 en parall√®le) a surtout √©t√© une gigantesque &lt;i&gt;bugfix party&lt;/i&gt;, histoire de rendre les fonctionnalit√©s arriv√©es auparavant plus stable ‚Äî la release note se trouve &lt;a href=&#34;https://github.com/docker/docker/blob/master/CHANGELOG.md#140-2014-12-11&#34;&gt;ici&lt;/a&gt;.
&lt;/p&gt;

&lt;p&gt;
La principale nouveaut√©e de cette version est l&#39;apparation d&#39;un nouveau &lt;i&gt;storage driver&lt;/i&gt;, il s&#39;agit d&#39;&lt;b&gt;OverlayFs&lt;/b&gt;. Il s&#39;agit d&#39;un m√©canisme de montage permettant de superposer dans un r√©pertoire le contenu de plusieurs autres r√©pertoires.
&lt;/p&gt;

&lt;p&gt;
Initialement Docker est bas√© &lt;b&gt;&lt;a href=&#34;http://en.wikipedia.org/wiki/Aufs&#34;&gt;Aufs&lt;/a&gt;&lt;/b&gt; qui fait, pour simplifier, la m√™me chose. Le probl√®me avec aufs est qu&#39;il n&#39;est pas int√©gr√© dans le  noyau Linux (i.e. dans les sources officielles), contrairement √† OverlayFS qui a fait son apparition avec le noyau &lt;a href=&#34;https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=e9be9d5e76e34872f0c37d72e25bc27fe9e2c54c&#34;&gt;3.18&lt;/a&gt;. Il √©tait donc n√©cessaire de disposer d&#39;un noyau patch√© ; Le noyau Linux de Debian et de sess d√©riv√©s (Ubuntu, etc.) ont ce &lt;i&gt;patchset&lt;/i&gt; aufs de base mais ce n&#39;est pas le cas de toutes les distributions. L&#39;id√©e de cette int√©gration est assez simple : supporter le maximum de distributions en se basant sur une &lt;i&gt;feature&lt;/i&gt; du noyau. C&#39;est donc bien √©videmment le &lt;i&gt;driver&lt;/i&gt; d&#39;avenir pour Docker ; attention cependant, la peinture est encore un peu fra√Æche &lt;code&gt;;-P&lt;/code&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-3&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-3&#34;&gt;Support d&#39;IPv6 (1.5.0)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-3&#34;&gt;
&lt;p&gt;
Les adresses IPv4 commencent a se faire &lt;a href=&#34;http://en.wikipedia.org/wiki/IPv4_address_exhaustion&#34;&gt;rare&lt;/a&gt;, il est donc important que Docker supporte IPv6. C&#39;est d√©sormais le cas avec la version 1.5.0, m√™me si ce n&#39;est pas activ√© par d√©faut. Pour activer le support de l&#39;IPv6 (en plus de l&#39;IPv4), il faut ajouter le &lt;i&gt;flag&lt;/i&gt; &lt;code&gt;--ipv6&lt;/code&gt; au daemon. Docker va donc mettre en place le &lt;i&gt;bridge&lt;/i&gt; &lt;code&gt;docker0&lt;/code&gt; avec en plus un IPv6 en mode local, avec l&#39;adresse &lt;code&gt;fe80::1&lt;/code&gt;.
&lt;/p&gt;

&lt;p&gt;
Par d√©faut les containers qui seront cr√©√©s n&#39;auront qu&#39;une adresse locale. Pour avoir une adresse IPv6 routable √† votre conteneur, il est n√©cessaire de lui pr√©ciser un &lt;i&gt;sous-r√©seau&lt;/i&gt; (subnet) dans lequel il va piocher son adresse. Cela se fait gr√¢ce √† l&#39;argument &lt;code&gt;--fixed-cidr-v6&lt;/code&gt;.
&lt;/p&gt;


&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;&lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;--ipv6&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;--fixed-cidr-v6&lt;/span&gt;=&lt;span style=&#34;color: #008000;&#34;&gt;&#34;2001:db8:1::/64&#34;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Comme je ne suis pas un pro de l&#39;IPv6, pour plus d&#39;information, et si l&#39;anglais ne vous fait pas peur, c&#39;est dans la &lt;a href=&#34;https://docs.docker.com/articles/networking/#ipv6&#34;&gt;documentation &#34;networking&#34;&lt;/a&gt; de Docker.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-4&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-4&#34;&gt;Conteneurs en lecture seule (1.5.0)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-4&#34;&gt;
&lt;p&gt;
Une autre fonctionnalit√© assez sympathique qui est arriv√© avec cette version 1.5.0 est les conteneurs en lecture seule ‚Äî c&#39;est Michael Crosby qui s&#39;est occup√© d&#39;&lt;a href=&#34;https://github.com/docker/docker/pull/10093&#34;&gt;impl√©menter √ßa&lt;/a&gt;. L&#39;int√©r√™t des conteneurs en lecture seule est de permettre de &lt;b&gt;contr√¥ler o√π l&#39;application&lt;/b&gt; √† l&#39;int√©rieur de votre conteneur &lt;b&gt;peut √©crire ou modifier des fichiers&lt;/b&gt;. En combinant ceci avec les volumes, vous pouvez vous assurez des emplacements dans lesquels votre conteneur va persister des √©tats ou donn√©es (le/les volumes), puisqu&#39;il ne sera pas possible d&#39;√©crire ailleurs de toute fa√ßon.
&lt;/p&gt;

&lt;p&gt;
Pour activer cette fonctionnalit√©, c&#39;est l&#39;argument &lt;code&gt;--read-only&lt;/code&gt;.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;&lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;--read-only&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;-v&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;/volume/writable&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;busybox&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;touch&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;/volume/writable&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Une autre utilisation des conteneurs en lecture seule est que cela donne la possibilit√© de faire du debug &lt;i&gt;post-mortem&lt;/i&gt; d&#39;un conteneur (en production par exemple). Cela nous permet de red√©marrer un conteneur qui aurait plant√©, en lecture seule avec le syst√®me de fichier dans l&#39;√©tat du crash.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-5&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-5&#34;&gt;Les labels pour le ¬´ daemon ¬ª, les images et les conteneurs (1.6.0)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-5&#34;&gt;
&lt;blockquote&gt;
&lt;p&gt;
One Meta Data to Rule Them All
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
Une des deux fonctionnalit√©s tr√®s attendue de la r√©cente version 1.6.0 sont les labels. En un mot, et pour le faire ¬´ √†-la ¬ª &lt;i&gt;le seigneur des anneaux&lt;/i&gt;, les labels peuvent se r√©sumer en &#34;&lt;b&gt;Une metadata pour les gouverner tous&lt;/b&gt;&#34; (√ßa le fait vachement mieux en anglais en fait).
&lt;/p&gt;

&lt;p&gt;
Les labels s&#39;appliquent sur le &lt;i&gt;daemon&lt;/i&gt;, les images et les conteneurs. C&#39;est un peu un m√©lange entre des tags et des variables d&#39;environnements puisque il s&#39;agit d&#39;un couple &lt;b&gt;cl√©/valeur&lt;/b&gt;.
&lt;/p&gt;

&lt;p&gt;
L&#39;ajout de label sur le &lt;i&gt;daemon&lt;/i&gt; se fait gr√¢ce √† l&#39;argument ‚Äî roulement de tambour ‚Äî &lt;code&gt;--label&lt;/code&gt; (&lt;code&gt;\o/&lt;/code&gt;). La principale utilit√© pour l&#39;instant est son utilisation conjointe avec Swarm dont nous parlerons un peu plus bas ; mais en deux mots, cela permet de filtrer les &lt;i&gt;engines&lt;/i&gt; sur lesquels on va &lt;i&gt;taper&lt;/i&gt;.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;Souvent, c&#39;est dans DOCKER_OPTS du fichier /etc/default/docker&lt;/span&gt;
&lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;-H&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;unix://var/run/docker.sock&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;--label&lt;/span&gt; &lt;span style=&#34;color: #BA36A5;&#34;&gt;storage&lt;/span&gt;=&lt;span style=&#34;color: #5e7837;&#34;&gt;ssd&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;--label&lt;/span&gt; &lt;span style=&#34;color: #BA36A5;&#34;&gt;type&lt;/span&gt;=&lt;span style=&#34;color: #5e7837;&#34;&gt;laptop&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
L&#39;ajout d&#39;un label sur une image se fait dans le fichier &lt;code&gt;Dockerfile&lt;/code&gt;, et l&#39;ajout d&#39;un label sur un conteneur, gr√¢ce √† l&#39;argument &lt;code&gt;--label&lt;/code&gt; pour rester coh√©rent. Construisons une image inutile mais en lui appliquant un label :
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;&lt;span style=&#34;color: #37785e;&#34;&gt;FROM&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;busybox&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;Support du multi-line pour LABEL&lt;/span&gt;
&lt;span style=&#34;color: #783778;&#34;&gt;LABEL&lt;/span&gt; &lt;span style=&#34;color: #BA36A5;&#34;&gt;vendor&lt;/span&gt;=&lt;span style=&#34;color: #78683f;&#34;&gt;zenika&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;\&lt;/span&gt;
      &lt;span style=&#34;color: #784437;&#34;&gt;com.zenika.lang&lt;/span&gt;=&lt;span style=&#34;color: #374478;&#34;&gt;golang&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;\&lt;/span&gt;
      &lt;span style=&#34;color: #78683f;&#34;&gt;com.zenika.version&lt;/span&gt;=&lt;span style=&#34;color: #43783f;&#34;&gt;0.1&lt;/span&gt;
&lt;span style=&#34;color: #7a4f7e;&#34;&gt;CMD&lt;/span&gt; [&lt;span style=&#34;color: #008000;&#34;&gt;&#34;echo&#34;&lt;/span&gt;&lt;span style=&#34;color: #7e544f;&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#34;zenika&#34;&lt;/span&gt;]
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Nous allons maintenant construire cette image et lancer un conteneur √† partir de cette derni√®re avec un autre label.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;build&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;-t&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;zenikaapp&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;.&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;]&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--name&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;test&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;--label&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;com.zenika.foo&lt;/span&gt;=&lt;span style=&#34;color: #784437;&#34;&gt;bar&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;zenikaapp&lt;/span&gt;
&lt;span style=&#34;color: #78683f;&#34;&gt;zenika&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
L&#39;id√©e c&#39;est que maintenant, lorsque l&#39;on va regarder la liste d&#39;images ou de conteneurs √† disposition sur notre &lt;i&gt;engine&lt;/i&gt;, nous allons pouvoir &lt;b&gt;filtrer&lt;/b&gt; par label, comme suit :
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;images&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--filter&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#34;label=vendor=zenika&#34;&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--filter&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#34;label=com.zenika.lang=golang&#34;&lt;/span&gt;
&lt;span style=&#34;color: #784437;&#34;&gt;REPOSITORY&lt;/span&gt;          &lt;span style=&#34;color: #3f7178;&#34;&gt;TAG&lt;/span&gt;                 &lt;span style=&#34;color: #707e4f;&#34;&gt;IMAGE&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;ID&lt;/span&gt;            &lt;span style=&#34;color: #7e544f;&#34;&gt;CREATED&lt;/span&gt;             &lt;span style=&#34;color: #784437;&#34;&gt;VIRTUAL&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;SIZE&lt;/span&gt;
&lt;span style=&#34;color: #4f7e67;&#34;&gt;zenikaapp&lt;/span&gt;           &lt;span style=&#34;color: #7a4f7e;&#34;&gt;latest&lt;/span&gt;              &lt;span style=&#34;color: #784437;&#34;&gt;66ffda023118&lt;/span&gt;        &lt;span style=&#34;color: #5e7837;&#34;&gt;43&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;seconds&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;ago&lt;/span&gt;      &lt;span style=&#34;color: #783778;&#34;&gt;2.433&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;MB&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;ps&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;-a&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--filter&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#34;label=com.zenika.foo=bar&#34;&lt;/span&gt;
&lt;span style=&#34;color: #374478;&#34;&gt;CONTAINER&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;ID&lt;/span&gt;        &lt;span style=&#34;color: #707e4f;&#34;&gt;IMAGE&lt;/span&gt;               &lt;span style=&#34;color: #78683f;&#34;&gt;COMMAND&lt;/span&gt;             &lt;span style=&#34;color: #7e544f;&#34;&gt;CREATED&lt;/span&gt;              [&lt;span style=&#34;color: #374478;&#34;&gt;&amp;#8230;&lt;/span&gt;]   &lt;span style=&#34;color: #707e4f;&#34;&gt;NAMES&lt;/span&gt;
&lt;span style=&#34;color: #513f78;&#34;&gt;37e9a37caf57&lt;/span&gt;        &lt;span style=&#34;color: #513f78;&#34;&gt;zenikaapp:latest&lt;/span&gt;    &lt;span style=&#34;color: #008000;&#34;&gt;&#34;echo zenika&#34;&lt;/span&gt;       &lt;span style=&#34;color: #43783f;&#34;&gt;About&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color: #37785e;&#34;&gt;minute&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;ago&lt;/span&gt;   [&lt;span style=&#34;color: #374478;&#34;&gt;&amp;#8230;&lt;/span&gt;]   &lt;span style=&#34;color: #783f5a;&#34;&gt;test&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;On peut &amp;#233;galement regarder les labels avec inspect&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;inspect&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#34;{{json .ContainerConfig.Labels }}&#34;&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;zenikaap&lt;/span&gt;
{&lt;span style=&#34;color: #008000;&#34;&gt;&#34;com.zenika.lang&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;golang&#34;&lt;/span&gt;&lt;span style=&#34;color: #7e544f;&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;com.zenika.version&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;0.1&#34;&lt;/span&gt;&lt;span style=&#34;color: #7e544f;&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;vendor&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;zenika&#34;&lt;/span&gt;}
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;inspect&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#34;{{json .Config.Labels }}&#34;&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;test&lt;/span&gt;
{&lt;span style=&#34;color: #008000;&#34;&gt;&#34;com.zenika.foo&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;bar&#34;&lt;/span&gt;&lt;span style=&#34;color: #7e544f;&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;com.zenika.lang&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;golang&#34;&lt;/span&gt;&lt;span style=&#34;color: #7e544f;&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;com.zenika.version&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;0.1&#34;&lt;/span&gt;&lt;span style=&#34;color: #7e544f;&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;vendor&#34;&lt;/span&gt;&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color: #008000;&#34;&gt;&#34;zenika&#34;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
On peut imaginer beaucoup d&#39;usage de ces labels. Par example, avec &lt;a href=&#34;http://rancher.com&#34;&gt;Rancher&lt;/a&gt;, ils sont utilis√©s pour faciliter la configuration du load-balancer (&lt;a href=&#34;http://rancher.com/docker-labels/&#34;&gt;ici&lt;/a&gt;) ‚Äî ils utilisent un label &lt;code&gt;io.rancher.service.provides&lt;/code&gt; qui permettra √† ce dernier de trouver automatiquement ces petits. Je vous laisse imaginer vos propres &lt;i&gt;use-cases&lt;/i&gt;.
&lt;/p&gt;

&lt;p&gt;
Il y a une partie de la documentation qui parle exclusivement des labels, avec une petite partie sur les &lt;i&gt;best-practice&lt;/i&gt; de nommage des labels, c&#39;est &lt;a href=&#34;https://docs.docker.com/userguide/labels-custom-metadata/&#34;&gt;ici&lt;/a&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-6&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-6&#34;&gt;Logging drivers \o/ (1.6.0)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-6&#34;&gt;
&lt;p&gt;
Un &lt;i&gt;gros reproche&lt;/i&gt; qui √©tait fait √† Docker √©tait sa gestion tr√®s &lt;b&gt;simpliste&lt;/b&gt; des logs des conteneurs. Plusieurs critiques √©taient faites :
&lt;/p&gt;

&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;Tout faire sortir sur &lt;code&gt;stdout&lt;/code&gt; et &lt;code&gt;stderr&lt;/code&gt; n&#39;est pas vraiment une habitude de nos jours, surtout dans des langages comme Java o√π l&#39;utilisation de &lt;i&gt;logger&lt;/i&gt; (Log4j, Slf4j, ‚Ä¶) est tr√®s r√©pandue. Cela rend le portage vers docker de certaines applications un peu plus fastidieux.
&lt;/li&gt;
&lt;li&gt;Il n&#39;y avait aucun m√©canisme de &lt;i&gt;rotation&lt;/i&gt; de logs ‚Äî et comme en plus le dossier dans lequel les logs √©taient √©cris est un peu enfoui dans &lt;code&gt;/var/lib/docker&lt;/code&gt;, cela pouvait poser quelques probl√®me si des conteneurs √©taient un peu trop bavards..
&lt;/li&gt;
&lt;li&gt;La solution utilis√©e pour sauvegarder ces logs et pourquoi pas les centraliser (avec ELK par exemple), √©tait d&#39;utiliser un volume, souvent partag√© entre applications, et de d√©marrer un conteneur pour g√©rer cette analyse, centralisation, ‚Ä¶. Non seulement ce n&#39;est pas tr√®s optimal, mais cela n√©cessitait de configurer chaque application (donc chaque conteneur) ‚Äî et &lt;code&gt;docker logs&lt;/code&gt; perdait tout son int√©r√™t.
&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
Avec la version 1.6.0, les &lt;i&gt;logging driver&lt;/i&gt; permettent une gestion des logs un peu plus optimale, ou au moins plus flexible. Il est donc maintenant possible de pr√©ciser le &lt;i&gt;logging driver&lt;/i&gt; √† utiliser. Ils en existent 3 pour l&#39;instant :
&lt;/p&gt;

&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;&lt;code&gt;json-file&lt;/code&gt; correspond au comportement par d√©faut de Docker avant la 1.6 et reste la valeur par d√©faut
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;syslog&lt;/code&gt; qui permet de connecter les logs de nos conteneurs dans notre v√©n√©rable syslog (ou en tout cas quelqu&#39;un qui parl le syslog).
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;none&lt;/code&gt; qui est le magicien puisqu&#39;il nous permet de faire taire compl√®tement un conteneur &lt;code&gt;o/&lt;/code&gt;.
&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
Il est possible de d√©finir le logging driver √† deux endroits :
&lt;/p&gt;

&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;sur le &lt;b&gt;daemon&lt;/b&gt; pour la valeur par d√©faut de tous les conteneurs.
&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;--log-driver&lt;/span&gt;=&lt;span style=&#34;color: #008000;&#34;&gt;&#34;json-file&#34;&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;Pour faire taire les conteneurs par d&amp;#233;faut&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;--log-driver&lt;/span&gt;=&lt;span style=&#34;color: #008000;&#34;&gt;&#34;none&#34;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;en option de la command &lt;b&gt;run&lt;/b&gt; (ou de la commande &lt;b&gt;create&lt;/b&gt;).
&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;--log-driver&lt;/span&gt;=&lt;span style=&#34;color: #3f7178;&#34;&gt;syslog&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;ubuntu&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;\&lt;/span&gt;
  &lt;span style=&#34;color: #37785e;&#34;&gt;/bin/bash&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;-c&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#39;while true; do echo &#34;Hello&#34;; sleep1; done&#39;&lt;/span&gt;
$ &lt;span style=&#34;color: #707e4f;&#34;&gt;tail&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;/var/log/syslog&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;]&lt;/span&gt;
&lt;span style=&#34;color: #374478;&#34;&gt;May&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;28&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;17:39:01&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;dev1&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt;[&lt;span style=&#34;color: #5e7837;&#34;&gt;116314&lt;/span&gt;]&lt;span style=&#34;color: #707e4f;&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;0e5b67244c00:&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Hello&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Une option &lt;code&gt;--log-opts&lt;/code&gt; est √©galement pr√©sente pour passer des options additionnelles au driver si celui-ci les supporte. Notons √©galement qu&#39;un driver pour &lt;code&gt;systemd&lt;/code&gt; devrait arriver avec la version 1.7.
&lt;/p&gt;

&lt;p&gt;
La pull-request ayant permis d&#39;int√©grer cette fonctionnalit√© se trouve &lt;a href=&#34;https://github.com/docker/docker/pull/10568&#34;&gt;ici&lt;/a&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-7&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-7&#34;&gt;Client Windows natif (1.6.0)&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-7&#34;&gt;
&lt;p&gt;
Enfin, on s&#39;en doutait un peu apr√®s l&#39;annonce du partenariat entre Docker Microsoft, √ßa bosse beaucoup pour porter Docker vers Windows. La premi√®re √©tape √©tait de fournir un client natif pour Windows. C&#39;est chose faite avec cette version 1.6. Maintenant beaucoup de travail est effectu√© pour rendre le &lt;i&gt;engine&lt;/i&gt; plus portable, il n&#39;y a qu&#39;√† suivre un peu les pull-request avec un tag &lt;code&gt;os/windows&lt;/code&gt; ou encore cette tr√®s r√©cente pull-request avec un titre plut√¥t √©vocateur : ¬´ &lt;a href=&#34;https://github.com/docker/docker/pull/13554&#34;&gt;Windows: The real Windows exec driver is here&lt;/a&gt; ¬ª.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-8&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-8&#34;&gt;Divers&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-8&#34;&gt;
&lt;p&gt;
Il y a pas mal d&#39;autres options qui sont arriv√©es depuis la version 1.3.0, nous allons en parcourir certaines rapidement ‚Äî parce que sinon cet article va faire 100 pages ;-p :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;&lt;b&gt;Stats&lt;/b&gt; (1.5.0) : une commande &lt;code&gt;stats&lt;/code&gt; (et donc une API derri√®re) permet de r√©cup√©rer quelques statistiques par conteneur, c&#39;est simple pour l&#39;instant.
&lt;/li&gt;
&lt;li&gt;Depuis la version 1.5.0 il est possible de sp√©cifier le ficher Dockerfile gr√¢ce √† l&#39;option &lt;code&gt;-f&lt;/code&gt; de la commande build ‚Äî jusqu&#39;√† maintenant docker regardait uniquement le dossier sp√©cifi√© et cherchait le fichier &lt;code&gt;Dockerfile&lt;/code&gt;. Cela permet donc, par exemple, d&#39;avoir plusieurs &lt;code&gt;Dockerfile&lt;/code&gt; dans un dossier.
&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;build&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;-t&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;monimage&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;backend.Dockerfile&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;.&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;] Build the backend&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;build&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;-t&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;monimage&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;-f&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;frontend.Dockerfile&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;.&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;] Build the frontend&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;Le &lt;i&gt;registry&lt;/i&gt; voit son API passer en V2, principalement pour am√©liorer les transferts. L&#39;impl√©mentation officielle a √©t√© r√©√©crite en Go (√† la place de Python) et se nomme maintenant &lt;a href=&#34;https://github.com/docker/distribution&#34;&gt;distribution&lt;/a&gt;.
&lt;/li&gt;
&lt;li&gt;La commande &lt;code&gt;commit est dot√©e, depuis la version 1.6.0, d&#39;une option =--change&lt;/code&gt; qui permet d&#39;appliquer une instruction support√©e par les &lt;code&gt;Dockerfile&lt;/code&gt; ‚Äî voir &lt;a href=&#34;https://docs.docker.com/reference/commandline/cli/#commit&#34;&gt;ici&lt;/a&gt;.
&lt;/li&gt;
&lt;li&gt;Docker a publi√© un petit document ¬´ &lt;a href=&#34;https://github.com/docker/docker/blob/master/image/spec/v1.md&#34;&gt;Docker Image Specification&lt;/a&gt; ¬ª qui a pour but de d√©finir le format des images utilis√©es par Docker, permettant √† d&#39;autres notamment des potentiels conccurents, d&#39;impl√©menter des images qui seraient compatible.
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-9&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-9&#34;&gt;√Ä venir&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-9&#34;&gt;
&lt;p&gt;
L&#39;une des principales nouveaut√©s qui devrait arriver avec la version 1.7 de Docker, c&#39;est l&#39;int√©gration d&#39;une &lt;b&gt;nouvelle stack r√©seau&lt;/b&gt; avec l&#39;int√©gration du projet &lt;a href=&#34;https://github.com/docker/libnetwork&#34;&gt;libnetwork&lt;/a&gt;, si tout se passe bien. On pourra noter √©galement de nouveaux &lt;i&gt;logging driver&lt;/i&gt;, avec notamment un &lt;code&gt;rollover&lt;/code&gt; driver ou encore le &lt;code&gt;systemd&lt;/code&gt; driver. On peut noter √©galement l&#39;arriv√©e d&#39;un &lt;i&gt;filesystem driver&lt;/i&gt; pour ZFS (voici la &lt;a href=&#34;https://github.com/docker/docker/pull/9411&#34;&gt;pull-request&lt;/a&gt;). Le Docker Birthday √©tant pass√© par l√†, beaucoup de corrections de bugs, de nouvelles petites fonctionnalit√©s, une meilleure couverture de code par les tests unitaires (&lt;code&gt;o/&lt;/code&gt;).
&lt;/p&gt;

&lt;p&gt;
La RC1 est disponible depuis le 28 mai, &lt;a href=&#34;https://github.com/docker/docker/releases/tag/v1.7.0-rc1&#34;&gt;ici&lt;/a&gt; et la &lt;a href=&#34;https://github.com/docker/docker/pull/13528&#34;&gt;pull-request&lt;/a&gt; associ√©e, donc √† vos tests !
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-10&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-10&#34;&gt;√âcosyst√®me&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-10&#34;&gt;
&lt;p&gt;
Trois projets ¬´ Docker ¬ª sont apparus depuis le dernier article : Compose, Swarm et Machine. Pr√©sentons les tr√®s rapidement.
&lt;/p&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-10-1&#34; class=&#34;outline-3&#34;&gt;
&lt;h3 id=&#34;sec-10-1&#34;&gt;Compose&lt;/h3&gt;
&lt;div class=&#34;outline-text-3&#34; id=&#34;text-10-1&#34;&gt;
&lt;p&gt;
Compose est le nouveau nom de Fig. Fig √©tait d√©velopp√© par Orchard qui a √©t√© rachet√© par Docker. Pour rappel, l&#39;id√©e est de d√©finir son environnement via un fichier YAML, que ce soit pour le code sur lequel nous travaillons mais √©galement les services externes desquels notre application d√©pend (Base de donn√©es, &#39;&#39;Message queue&#39;&#39;, etc.).
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-yaml&#34;&gt;&lt;span style=&#34;color: #BA36A5;&#34;&gt;web&lt;/span&gt;:
  &lt;span style=&#34;color: #BA36A5;&#34;&gt;build&lt;/span&gt;: .
  &lt;span style=&#34;color: #BA36A5;&#34;&gt;command&lt;/span&gt;: lein run
  &lt;span style=&#34;color: #BA36A5;&#34;&gt;links&lt;/span&gt;:
   - db
  &lt;span style=&#34;color: #BA36A5;&#34;&gt;ports&lt;/span&gt;:
   - &lt;span style=&#34;color: #008000;&#34;&gt;&#34;8000:8000&#34;&lt;/span&gt;
&lt;span style=&#34;color: #BA36A5;&#34;&gt;db&lt;/span&gt;:
  &lt;span style=&#34;color: #BA36A5;&#34;&gt;image&lt;/span&gt;: postgres
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Compose est en version 1.2 ‚Äî depuis la version 1.0, la majorit√© des modifications sont des corrections de bugs et des ajouts pour suivre les modifications et nouvelles fonctionnalit√©s de Docker (&lt;code&gt;env-file&lt;/code&gt;, &lt;code&gt;dns_search&lt;/code&gt;, &lt;code&gt;add_host&lt;/code&gt;, &lt;code&gt;restart&lt;/code&gt;, &lt;code&gt;volumes_from&lt;/code&gt;, &lt;code&gt;net&lt;/code&gt;, ‚Ä¶). La commande est maintenant &lt;code&gt;docker-compose&lt;/code&gt; √† la place de &lt;code&gt;fig&lt;/code&gt; et le fichier &lt;code&gt;docker-compose.yml&lt;/code&gt; √† la place de &lt;code&gt;fig.yml&lt;/code&gt; ‚Äî pour des raisons de r√©tro-compatibilit√©, Compose continue de lire les &lt;code&gt;fig.yml&lt;/code&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-10-2&#34; class=&#34;outline-3&#34;&gt;
&lt;h3 id=&#34;sec-10-2&#34;&gt;Swarm &amp;amp; Machine&lt;/h3&gt;
&lt;div class=&#34;outline-text-3&#34; id=&#34;text-10-2&#34;&gt;
&lt;p&gt;
Deux nouveaux projets ont fait leur apparition dans l&#39;escarcelle de Docker Inc. : Swarm et Machine. Swarm est le &lt;i&gt;clustering&lt;/i&gt; √† moyenne √©chelle vu par Docker. Machine permet de provisionner Docker sur diff√©rents providers : amazon aws, google compute engine, azure, Virtualbox pour ne citer qu&#39;eux ‚Äî mais beaucoup d&#39;autres sont d√©j√† support√©s.
&lt;/p&gt;

&lt;p&gt;
Voil√† ce que J√©r√¥me Petazzoni dit √† propos de Swarm :
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
Un syst√®me de cluster utilisant l‚ÄôAPI Docker et compatible avec tous les outils de l‚Äô√©cosyst√®me maison. On peut utiliser les commandes classiques Docker pour piloter le cluster
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
L&#39;id√©e principale de Swarm est &lt;b&gt;Je veux parler √† mon cluster Docker de la m√™me fa√ßon que je parle avec mon daemon Docker&lt;/b&gt;. Cela se traduit assez simplement par : &lt;b&gt;Swarm expose la m√™me API que docker&lt;/b&gt;. C&#39;est une id√©e simple et terriblement puissante puisque cela veut dire que je peux administrer mon cluster avec les m√™mes commandes que j&#39;utilise quand je travaille en local.  Swarm a pour but de piloter des clusters d&#39;une taille relativement petite (moins de 1000 machines). Pour les clusters de plus grande taille, il existe de tr√®s bonnes solutions, comme &lt;a href=&#34;http://mesos.apache.org/&#34;&gt;Mesos&lt;/a&gt;, et ce n&#39;est pas le but de Docker Inc. de venir les concurrencer, bien au contraire.
&lt;/p&gt;

&lt;p&gt;
Pour faire simple, swarm c&#39;est un &lt;b&gt;manager&lt;/b&gt; et des &lt;b&gt;agents&lt;/b&gt; (un par engine) ‚Äî les agents s&#39;enregistrent aupr√®s du master par le biais d&#39;un &lt;i&gt;service discovery&lt;/i&gt;. Swarm dispose d&#39;un petit service de discovery mais qui n&#39;est l√† que pour &lt;i&gt;la d√©mo&lt;/i&gt; ; il est possible et conseill√© de le connecter √† des solutions existantes, pour l&#39;instant &lt;a href=&#34;https://github.com/hashicorp/consul&#34;&gt;consul&lt;/a&gt; et &lt;a href=&#34;https://github.com/coreos/etcd&#34;&gt;etcd&lt;/a&gt;.
&lt;/p&gt;

&lt;p&gt;
Un bout de code vaut mieux qu&#39;un long discours, voici comment &lt;i&gt;bootstraper&lt;/i&gt; un cluster Swarm, avec l&#39;aide de Machine pour √™tre &lt;i&gt;funky&lt;/i&gt;.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;On cr&amp;#233;e un cluster simple avec son id&lt;/span&gt;
$ &lt;span style=&#34;color: #7a4f7e;&#34;&gt;swarm&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;create&lt;/span&gt;
&lt;span style=&#34;color: #3f7178;&#34;&gt;50862dcedd53c2f584adfb00e85bac4b&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;On d&amp;#233;marre des agents&lt;/span&gt;
$ &lt;span style=&#34;color: #43783f;&#34;&gt;docker-machine&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;azure&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm-discovery&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;token://50862dcedd53c2f584adfb00e85bac4b&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;node1&lt;/span&gt;
&lt;span style=&#34;color: #3f7178;&#34;&gt;INFO&lt;/span&gt;[&lt;span style=&#34;color: #7a4f7e;&#34;&gt;0000&lt;/span&gt;] &lt;span style=&#34;color: #5e7837;&#34;&gt;Creating&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;SSH&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;key...&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;]&lt;/span&gt;
$ &lt;span style=&#34;color: #43783f;&#34;&gt;docker-machine&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;digitalocean&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm-discovery&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;token://50862dcedd53c2f584adfb00e85bac4b&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;node2&lt;/span&gt;
&lt;span style=&#34;color: #3f7178;&#34;&gt;INFO&lt;/span&gt;[&lt;span style=&#34;color: #7a4f7e;&#34;&gt;0000&lt;/span&gt;] &lt;span style=&#34;color: #5e7837;&#34;&gt;Creating&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;SSH&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;key...&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;[&amp;#8230;]&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;On d&amp;#233;marre le master&lt;/span&gt;
$ &lt;span style=&#34;color: #43783f;&#34;&gt;docker-machine&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;create&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;virtualbox&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;--swarm-master&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm-discovery&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;token://50862dcedd53c2f584adfb00e85bac4b&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;manager&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
Maintenant que l&#39;on dispose d&#39;un petit cluster, en pointant dessus (merci Machine) on va pouvoir lancer des commandes docker.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;$ $(&lt;span style=&#34;color: #43783f;&#34;&gt;docker-machine&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;env&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--swarm&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;manager&lt;/span&gt;)
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;Le bon vieux info&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;info&lt;/span&gt;
&lt;span style=&#34;color: #3f7178;&#34;&gt;Containers:&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;4&lt;/span&gt;
&lt;span style=&#34;color: #4f5c7e;&#34;&gt;Nodes:&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;3&lt;/span&gt;
 &lt;span style=&#34;color: #374478;&#34;&gt;manager:&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;192.168.99.103:2376&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;Containers:&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;2&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Reserved&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;CPUs:&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;4&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Reserved&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;Memory:&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;B&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;999.9&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;MiB&lt;/span&gt;
 &lt;span style=&#34;color: #78683f;&#34;&gt;node1:&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;45.55.160.223:2376&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;Containers:&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;1&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Reserved&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;CPUs:&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;1&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Reserved&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;Memory:&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;B&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;490&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;MiB&lt;/span&gt;
 &lt;span style=&#34;color: #513f78;&#34;&gt;node2:&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;swarm-nwde2.cloudapp.net:2376&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;Containers:&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;1&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Reserved&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;CPUs:&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;1&lt;/span&gt;
  &lt;span style=&#34;color: #78683f;&#34;&gt;&amp;#9492;&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;Reserved&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;Memory:&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;B&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;1.639&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;GiB&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;On d&amp;#233;marre des nginx&lt;/span&gt;
$ &lt;span style=&#34;color: #4f7e67;&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color: #0000FF;&#34;&gt; in&lt;/span&gt; &lt;span style=&#34;color: #FF1493;&#34;&gt;`seq 1 3`&lt;/span&gt;; &lt;span style=&#34;color: #0000FF;&#34;&gt;do&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #783f5a;&#34;&gt;-p&lt;/span&gt; &lt;span style=&#34;color: #7a4f7e;&#34;&gt;80:80&lt;/span&gt; &lt;span style=&#34;color: #783778;&#34;&gt;nginx&lt;/span&gt;; &lt;span style=&#34;color: #0000FF;&#34;&gt;done&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;ps&lt;/span&gt;
&lt;span style=&#34;color: #374478;&#34;&gt;CONTAINER&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;ID&lt;/span&gt;    &lt;span style=&#34;color: #707e4f;&#34;&gt;IMAGE&lt;/span&gt;       &lt;span style=&#34;color: #78683f;&#34;&gt;COMMAND&lt;/span&gt;                &lt;span style=&#34;color: #78683f;&#34;&gt;...&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;PORTS&lt;/span&gt;                                &lt;span style=&#34;color: #707e4f;&#34;&gt;NAMES&lt;/span&gt;
&lt;span style=&#34;color: #374478;&#34;&gt;9bff07d8ee18&lt;/span&gt;    &lt;span style=&#34;color: #78683f;&#34;&gt;nginx:1.7&lt;/span&gt;   &lt;span style=&#34;color: #008000;&#34;&gt;&#34;nginx -g &#39;daemon of   ... 443/tcp, 104.210.33.180:80-&amp;gt;80/tcp   node1/loving_torvalds&lt;/span&gt;
&lt;span style=&#34;color: #008000;&#34;&gt;457ed59c9bb3    nginx:1.7   &#34;&lt;/span&gt;&lt;span style=&#34;color: #783778;&#34;&gt;nginx&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;-g&lt;/span&gt; &lt;span style=&#34;color: #008000;&#34;&gt;&#39;daemon of   ... 443/tcp, 45.55.160.223:80-&amp;gt;80/tcp    node2/drunk_swartz&lt;/span&gt;
&lt;span style=&#34;color: #008000;&#34;&gt;6013be18cdbc    nginx:1.7   &#34;nginx -g &#39;&lt;/span&gt;&lt;span style=&#34;color: #3f7178;&#34;&gt;daemon&lt;/span&gt; &lt;span style=&#34;color: #5e7837;&#34;&gt;of&lt;/span&gt;   &lt;span style=&#34;color: #78683f;&#34;&gt;...&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;443/tcp,&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;192.168.99.103:80-&lt;/span&gt;&amp;gt;&lt;span style=&#34;color: #5e7837;&#34;&gt;80/tcp&lt;/span&gt;   &lt;span style=&#34;color: #707e4f;&#34;&gt;manager/condescending_galileo&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
On voit qu&#39;on a d√©marr√© nginx sur les 3 n≈ìuds. Swarm a quelques strat√©gies pour d√©marrer un conteneur sur un n≈ìud ou l&#39;autre :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;&lt;code&gt;spread&lt;/code&gt; va √©parpiller les conteneurs pour que chaque n≈ìud en ait le moins possible (r√©partis).
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;binpack&lt;/code&gt; va faire l&#39;inverse (tout sur le m√™me n≈ìud jusqu&#39;√† ce que ses ressources soient √©puis√©s).
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;random&lt;/code&gt; qui fait &lt;i&gt;au pif&lt;/i&gt;.
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
Il est √©galement possible de mettre des contraintes lors du lancement d&#39;un conteneur, en utilisant le flag &lt;code&gt;-e&lt;/code&gt; de &lt;code&gt;docker run&lt;/code&gt; (&lt;code&gt;-e&lt;/code&gt; = variables d&#39;environnement).
&lt;/p&gt;


&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-sh&#34;&gt;&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;D&amp;#233;marrer postgres sur un host qui a le label storage=ssd&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;-e&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;constraint:&lt;/span&gt;&lt;span style=&#34;color: #4f5c7e;&#34;&gt;storage&lt;/span&gt;==&lt;span style=&#34;color: #5e7837;&#34;&gt;ssd&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--name&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;postgres&lt;/span&gt; &lt;span style=&#34;color: #4f7e67;&#34;&gt;postgres&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;D&amp;#233;marrer redis &amp;#224; cot&amp;#233; du conteneur dont le nom est postgres&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #707e4f;&#34;&gt;-e&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;affinity:&lt;/span&gt;&lt;span style=&#34;color: #4f5c7e;&#34;&gt;container&lt;/span&gt;==&lt;span style=&#34;color: #4f7e67;&#34;&gt;postgres&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--name&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;redis&lt;/span&gt; &lt;span style=&#34;color: #7e544f;&#34;&gt;redis&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;D&amp;#233;marer backend o&amp;#249; tu veux, mais comme les links sont des contraintes&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;implicites il d&amp;#233;marrera sur le m&amp;#234;me host que postgres ET redis&lt;/span&gt;
&lt;span style=&#34;color: #8D8D84;&#34;&gt;# &lt;/span&gt;&lt;span style=&#34;color: #8D8D84; font-style: italic;&#34;&gt;(ou ne d&amp;#233;marrera pas ces derniers ne sont pas au m&amp;#234;me endroit)&lt;/span&gt;
$ &lt;span style=&#34;color: #783778;&#34;&gt;docker&lt;/span&gt; &lt;span style=&#34;color: #513f78;&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color: #43783f;&#34;&gt;-d&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;--link&lt;/span&gt; &lt;span style=&#34;color: #3f7178;&#34;&gt;redis:redis&lt;/span&gt; &lt;span style=&#34;color: #374478;&#34;&gt;--link&lt;/span&gt; &lt;span style=&#34;color: #784437;&#34;&gt;postgres:db&lt;/span&gt; &lt;span style=&#34;color: #4f5c7e;&#34;&gt;--name&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;backend&lt;/span&gt; &lt;span style=&#34;color: #78683f;&#34;&gt;backend&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
On pourrait faire un article d√©di√© √† Swarm (ce qui sera probablement le cas dans un avenir assez proche) donc je vous laisse le d√©couvrir via &lt;a href=&#34;https://github.com/docker/swarm/&#34;&gt;github&lt;/a&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-11&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-11&#34;&gt;Lev√©es de fonds et acquisitons&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-11&#34;&gt;
&lt;p&gt;
Docker est sur toutes les l√®vres en ce moment. Il est donc normal que cela attire √©galement des capitaux. Le 14 avril dernier, Docker annon√ßait une nouvelle lev√©e de fonds de &lt;b&gt;95 millions&lt;/b&gt; de dollars. Apr√®s celle de &lt;i&gt;40 millions&lt;/i&gt; en Septembre 2014, on peut se dire que Docker Inc. a de beaux jours √† venir.
&lt;/p&gt;

&lt;p&gt;
Docker Inc. ¬´ mange ¬ª aussi quelques startups, puisque apr√®s Orchard, qui √©ditait fig (devenu docker-compose), ils ont fait l&#39;acquisition de &lt;a href=&#34;http://socketplane.io/&#34;&gt;Socketplane&lt;/a&gt; et &lt;a href=&#34;https://kitematic.com/&#34;&gt;Kitematic&lt;/a&gt;. Kitematic est un outil &lt;i&gt;desktop&lt;/i&gt; qui permet de facilement utiliser Docker sous Mac OS X, une belle application, un peu ¬´ clickodrome ¬ª &lt;code&gt;;-P&lt;/code&gt;. &lt;a href=&#34;http://socketplane.io/&#34;&gt;Socketplane&lt;/a&gt; est une solution r√©seau qui connectait Open vSwitch avec Docker ‚Äî nulle doute que la r√©cente libnetwork vient de l√†.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-12&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-12&#34;&gt;√âv√®nements&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-12&#34;&gt;
&lt;p&gt;
Nous allons finir avec une liste non-exhaustive et un peu orient√©e des √©v√®nements &lt;i&gt;marquants&lt;/i&gt; qui se sont pass√©s ces derniers mois :
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;Le &lt;a href=&#34;https://blog.docker.com/2014/11/docker-tour-de-france/&#34;&gt;Docker Tour de France&lt;/a&gt;, avec notament un &lt;a href=&#34;http://www.meetup.com/Docker-Paris/events/218767688/&#34;&gt;hackathon&lt;/a&gt; organis√© √† l&#39;&lt;a href=&#34;http://www.epitech.eu/paris/ecole-informatique-paris.aspx&#34;&gt;Epitech&lt;/a&gt;, o√π notre &lt;a href=&#34;https://twitter.com/mariolet&#34;&gt;Mario Loriedo&lt;/a&gt; national a bootstrap√© son projet Sublime-docker avec &lt;a href=&#34;https://github.com/mjbright&#34;&gt;Mike Bright&lt;/a&gt; et √† du coup gagn√© sa place √† la DockerCon de 2015.
&lt;/li&gt;
&lt;li&gt;Les &lt;a href=&#34;http://blog.zenika.com/index.php?post/2015/02/19/NightClazz-Docker-Avance&#34;&gt;Nightclazz&lt;/a&gt; &lt;a href=&#34;http://zenika.github.io/NC-Docker-Decouverte/&#34;&gt;d√©couverte&lt;/a&gt; et &lt;a href=&#34;http://zenika.github.io/NC-Docker-Avance/#/&#34;&gt;avanc√©e&lt;/a&gt; h√©berg√© par Zenika, pr√©sent√© par Mario Loriedo et moi-m√™me ;-).
&lt;/li&gt;
&lt;li&gt;La DockerCon Europe.
&lt;/li&gt;
&lt;li&gt;Le &lt;a href=&#34;http://docker.party/&#34;&gt;Docker Birthday&lt;/a&gt;, gigantesque &lt;i&gt;Open-source-athon&lt;/i&gt; tout autour du monde ‚Äî une v√©ritable r√©ussite, tant au niveau de l&#39;organisation (des √©v√®nements, la pr√©paration en amont des &lt;i&gt;issues&lt;/i&gt;, etc.) que de ce qu&#39;il en est &lt;a href=&#34;https://blog.docker.com/2015/05/dockers-2nd-birthday-by-the-numbers/&#34;&gt;ressorti&lt;/a&gt;.
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Migration vers hugo</title>
      <link>http://vincent.demeester.fr/posts/2015-05-09-migration-to-hugo/</link>
      <pubDate>Sat, 09 May 2015 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2015-05-09-migration-to-hugo/</guid>
      <description>&lt;p&gt;
Et voil√†, une semaine apr√®s m&#39;√™tre remis en route sur ce blog, je fais
d√©j√† une migration &lt;code&gt;&amp;gt;_&amp;lt;&lt;/code&gt;. Je me suis rendu compte que &lt;a href=&#34;http://jekyllrb.com/&#34;&gt;Jekyll&lt;/a&gt;
m&#39;√©nervait un peu, et comme je suis √† fond dans &lt;a href=&#34;http://golang.org/&#34;&gt;go&lt;/a&gt; en ce moment, j&#39;ai
regard√© du c√¥t√© des g√©n√©rateurs de sites static et &lt;a href=&#34;http://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; a clairement
retenu mon attention.
&lt;/p&gt;

&lt;div id=&#34;outline-container-sec-1&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-1&#34;&gt;Pourquoi Hugo ?&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-1&#34;&gt;
&lt;blockquote&gt;
&lt;p&gt;
&lt;b&gt;Make the Web Fun Again&lt;/b&gt;
&lt;/p&gt;

&lt;p&gt;
Introducing Hugo, a new idea around making website creation simple again. Hugo flexibly works with many formats and is ideal for blogs, docs, portfolios and much more. Hugo‚Äôs speed fosters creativity and makes building a website fun again.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
Presque tout est dit dans cette citation.
&lt;/p&gt;

&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;Hugo est rapide.
&lt;/li&gt;
&lt;li&gt;Le syst√®me de content est un r√©gale.
&lt;/li&gt;
&lt;li&gt;L&#39;organisation d&#39;un &lt;i&gt;projet hugo&lt;/i&gt; est simple :
&lt;ul class=&#34;org-ul&#34;&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt; pour le contenu, avec ce qu&#39;on veut dedans,
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt; pour le contenu statique (&lt;code&gt;css&lt;/code&gt;, &lt;code&gt;javascript&lt;/code&gt;, &lt;code&gt;images&lt;/code&gt;, ‚Ä¶),
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;layouts&lt;/code&gt; pour les templates (super facile de mettre des templates diff√©rents en fonction des contenus, voir &lt;a href=&#34;http://gohugo.io/templates/content/&#34;&gt;ici&lt;/a&gt;),
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;themes&lt;/code&gt; pour les themes applicables (qui d√©finissent eux m√™me &lt;code&gt;layouts&lt;/code&gt; et &lt;code&gt;static&lt;/code&gt;.
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Le syst√®me de template est &lt;a href=&#34;http://gohugo.io/templates/go-templates/&#34;&gt;puissant&lt;/a&gt; et un vrai r√©gale.
&lt;/li&gt;
&lt;li&gt;Le mode &lt;code&gt;server&lt;/code&gt; a la possiblit√© de surveiller les fichiers(avec le &lt;i&gt;flag&lt;/i&gt; &lt;code&gt;-w&lt;/code&gt;, et impl√©mente &lt;a href=&#34;http://gohugo.io/extras/livereload/&#34;&gt;LiveReload&lt;/a&gt; ce qui est un petit bonus non n√©gligeable.
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-2&#34;&gt;Ce qui changes&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-2&#34;&gt;
&lt;p&gt;
Le principale changement est sur le/les repository utilis√©s. Avant tout √©tait dans &lt;a href=&#34;https://github.com/vdemeester/vdemeester.github.com&#34;&gt;vdemeester.github.com&lt;/a&gt;, puisque c&#39;est github qui g√©n√©rait le r√©sultat final avec Jekyll. Ce n&#39;est maintenant plus le cas : &lt;a href=&#34;https://github.com/vdemeester/blog&#34;&gt;blog&lt;/a&gt; h√©berge les sources du blog (les fichiers content en Markdown ou &lt;i&gt;HTML-from-orgmode&lt;/i&gt; ainsi que les templates et la configuration &lt;a href=&#34;http://gohugo.io/&#34;&gt;Hugo&lt;/a&gt; ‚Äî &lt;a href=&#34;https://github.com/vdemeester/vdemeester.github.com&#34;&gt;vdemeester.github.com&lt;/a&gt; h√©berge d√©sormais le r√©sultat.
&lt;/p&gt;

&lt;p&gt;
J&#39;en ai profit√© √©galement pour faire quelques ajustements graphique, principalement sur les tags qui ont maintenant, parfois, des couleurs diff√©rentes.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-3&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-3&#34;&gt;Int√©gration avec Emacs &amp;amp; orgmode&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-3&#34;&gt;
&lt;p&gt;
Il me manque encore quelques petits &lt;i&gt;trucs&lt;/i&gt; pour rendre √ßa automatique, mais dans l&#39;id√©e, voil√† le workflow que j&#39;utilise quand je publie un article (comme maintenant) :
&lt;/p&gt;

&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;D√©marre &lt;code&gt;hugo server -w&lt;/code&gt; dans mon repository &lt;code&gt;blog&lt;/code&gt;.
&lt;/li&gt;
&lt;li&gt;Je cr√©er mon fichier &lt;code&gt;org&lt;/code&gt; au bon endroit (soit &lt;code&gt;$HOME/desktop/org/notes/vdf/monfichier.org&lt;/code&gt;). Par rapport au &lt;a href=&#34;http://vincent.demeester.fr/posts/2015-05-01-orgmode-et-jekyll/&#34;&gt;billet pr√©c√©dent&lt;/a&gt;, le header de mes fichiers &lt;code&gt;org&lt;/code&gt; change un peu :

&lt;pre class=&#34;example&#34;&gt;
#+begin_html
+++
title=&#34;Migration vers hugo&#34;
date=&#34;2015-05-09&#34;
categories=[&#34;developement&#34;]
tags=[&#34;hugo&#34;,&#34;golang&#34;,&#34;blog&#34;,&#34;emacs&#34;,&#34;orgmode&#34;,&#34;html&#34;]
lang=&#34;fr&#34;
+++
#+end_html

Et voil√†, une semaine apr√®s  m&#39;√™tre remis en route sur ce blog, je fais d√©j√† une migration =&amp;gt;_&amp;lt;=. Je me suis rendu compte que [[http://jekyllrb.com/][Jekyll]] m&#39;√©nervait un peu, et comme je suis √† fond dans [[http://golang.org/][go]] en ce moment, j&#39;ai regard√© du c√¥t√© des g√©n√©rateurs de sites static et [[http://gohugo.io/][Hugo]] a clairement retenu mon attention.
&lt;/pre&gt;
&lt;/li&gt;

&lt;li&gt;J&#39;ex√©cute &lt;code&gt;org-publish-current-project&lt;/code&gt; (qu&#39;il faut que je &lt;i&gt;bind&lt;/i&gt; pour √©viter de me le taper √† la main..)
&lt;/li&gt;
&lt;li&gt;Et je regarde le r√©sultat dans mon navigateur (merci encore &lt;a href=&#34;http://gohugo.io/extras/livereload/&#34;&gt;LiveReload&lt;/a&gt;).
&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
Pour me simplifier la vie, il me resterais √† d√©marrer et arr√™ter facilement &lt;code&gt;hugo server -w&lt;/code&gt; dans le bon dossier directement depuis emacs (un peu √†-la &lt;code&gt;compile&lt;/code&gt;), &lt;i&gt;binder&lt;/i&gt; &lt;code&gt;org-publish-current-project&lt;/code&gt; et un petit script final qui copie le rendu de &lt;code&gt;blog&lt;/code&gt; vers &lt;code&gt;vincent.demeester.fr&lt;/code&gt; et qui commit (le tout appellable depuis Emacs &lt;code&gt;;-P&lt;/code&gt;).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Orgmode et Jekyll</title>
      <link>http://vincent.demeester.fr/posts/2015-05-01-orgmode-et-jekyll/</link>
      <pubDate>Fri, 01 May 2015 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2015-05-01-orgmode-et-jekyll/</guid>
      <description>&lt;div id=&#34;outline-container-sec-1&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-1&#34;&gt;Un peu plus d&#39;un an..&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-1&#34;&gt;
&lt;p&gt;
.. que je n&#39;ai rien post√© ici. Le temps passe bien vite, mais c&#39;est plut√¥t une bonne chose. Je crois que quelque chose me manquait pour poster ici plus souvent.
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
Au niveau de mes points d&#39;entr√©es sur le web, je compte remettre un peu en route la partie blog de ce site et tourner shortbrain.org (ou autre) en un site plus &#34;documentation&#34; en me basant sur mes notes (powered by org-mode). &lt;b&gt;Je me suis √©galement remis √† Gnu Emacs et oh god qu&#39;est-ce que c&#39;est bon&lt;/b&gt; :-D.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
C&#39;est ce que j&#39;√©crivais il y a un an, et effectivement c&#39;est toujours aussi bon &lt;code&gt;;-D&lt;/code&gt;. J&#39;ai commenc√© √† utiliser &lt;code&gt;org-mode&lt;/code&gt; de mani√®re assez intensive, pour mettre en place mon &lt;i&gt;personal kanban&lt;/i&gt; mais √©galement pour prendre mes notes. Et plus je l&#39;utilise, plus j&#39;ai du mal m&#39;en passer et √† aller dans mon dossier h√©bergeant ce site pour y √©crire en Markdown. Il me fallait donc trouver une astuce pour convertir certaines notes en post pour Jekyll. C&#39;est maintenant chose faite (apr√®s 6 mois dans ma TODO-list‚Ä¶), et voici comment je m&#39;en sors.
&lt;/p&gt;

&lt;p&gt;
L&#39;id√©e g√©n√©rale est assez simple :
&lt;/p&gt;

&lt;ol class=&#34;org-ol&#34;&gt;
&lt;li&gt;Utiliser un dossier particulier pour les notes destin√© √† ce blog
&lt;/li&gt;
&lt;li&gt;Exporter, au format html, ces notes dans le bon dossier (&lt;code&gt;_posts&lt;/code&gt;)
&lt;/li&gt;
&lt;li&gt;‚Ä¶ et c&#39;est tout en fait :) ‚Äî c&#39;√©tait pas &lt;i&gt;ben&lt;/i&gt; compliqu√© !
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-2&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-2&#34;&gt;Les fichiers org&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-2&#34;&gt;
&lt;p&gt;
Tous mes fichiers &lt;code&gt;org-mode&lt;/code&gt; sont dans un ensemble de dossiers bien particulier ‚Äî cela n&#39;a pas grand chose d&#39;important √† faire ici, mais √ßa permet de suivre la configuration qui suit. Il s&#39;agit du dossier &lt;code&gt;~/desktop/org/&lt;/code&gt;, et de ces fils : &lt;code&gt;todos&lt;/code&gt; pour ce que je dois faire et &lt;code&gt;notes&lt;/code&gt; pour ma prise de note. Dans &lt;code&gt;notes&lt;/code&gt; on trouve donc des dossiers et en particulier un qui se nomme &lt;code&gt;vdf&lt;/code&gt; (pour Vincent.Demeester.Fr).
&lt;/p&gt;

&lt;p&gt;
La seule diff√©rence que les fichiers &lt;code&gt;.org&lt;/code&gt; ont dans ce dossier par rapport aux autres, c&#39;est le d√©but du fichier. En effet, &lt;a href=&#34;http://jekyllrb.com/&#34;&gt;Jekyll&lt;/a&gt; a besoin d&#39;une ent√™te en &lt;code&gt;YAML&lt;/code&gt; pour le layout, les tags, la cat√©gorie et plein d&#39;autres trucs. Le fichier &lt;code&gt;org&lt;/code&gt; de ce billet ressemble √† √ßa par example :
&lt;/p&gt;

&lt;pre class=&#34;example&#34;&gt;
#+BEGIN_HTML
---
layout: post
category: developement
tags: jekyll blog emacs orgmode html
lang: fr
---
#+END_HTML
* Un peu plus d&#39;un an..

.. que je n&#39;ai rien post√© ici. Le temps passe bien vite, mais c&#39;est plut√¥t une bonne chose. Je crois que quelque chose me manquait pour poster ici.

[‚Ä¶]
&lt;/pre&gt;

&lt;p&gt;
Les utilisateurs de Jekyll reconnaitront les &lt;code&gt;---&lt;/code&gt; et le format du header. &lt;code&gt;#+BEGIN_HTML&lt;/code&gt; et &lt;code&gt;#+END_HTML&lt;/code&gt; sont l√† pour dire √† &lt;code&gt;org-mode&lt;/code&gt; d&#39;exporter un bloc en HTML sans l&#39;interpr√©ter ‚Äî c&#39;est une fa√ßon de mettre du HTML dans un document &lt;code&gt;org&lt;/code&gt; si on peut pas faire ce qu&#39;on veut avec le &lt;i&gt;markup&lt;/i&gt;. Ici √ßa nous permet d&#39;exporter tel quel le header de &lt;a href=&#34;http://jekyllrb.com/&#34;&gt;Jekyll&lt;/a&gt; en haut du HTML g√©n√©r√©, pratique !
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;outline-container-sec-3&#34; class=&#34;outline-2&#34;&gt;
&lt;h2 id=&#34;sec-3&#34;&gt;Configuration de org-mode&lt;/h2&gt;
&lt;div class=&#34;outline-text-2&#34; id=&#34;text-3&#34;&gt;
&lt;p&gt;
Il reste maintenant √† configurer le &lt;i&gt;projet de publication&lt;/i&gt; (publishing project) dans Emacs. Je vais mettre ici juste la partie int√©ressante, donc pour plus d&#39;information sur comment publier des fichiers org-mode avec Emacs, c&#39;est par &lt;a href=&#34;http://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html&#34;&gt;ici&lt;/a&gt; pour un tutoriel (j&#39;adore &lt;a href=&#34;http://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html&#34;&gt;worg&lt;/a&gt; soit dit en passant :P).
&lt;/p&gt;

&lt;p&gt;
L&#39;id√©e c&#39;est de d√©finir un projet avec plusieurs &lt;i&gt;components&lt;/i&gt;, un pour les fichiers &lt;code&gt;org&lt;/code&gt;, un pour les fichiers &lt;code&gt;css&lt;/code&gt; et un pour les &lt;i&gt;assets&lt;/i&gt; (images, vid√©os, ‚Ä¶). On souhaite √©galement ne pas g√©n√©rer de table des mati√®res (TOC) et ne g√©nerer que le &lt;i&gt;body&lt;/i&gt; (pas de &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;, ‚Ä¶). Et √ßa se pr√©sente comme suit.
&lt;/p&gt;

&lt;div class=&#34;org-src-container&#34;&gt;

&lt;pre class=&#34;src src-emacs-lisp&#34;&gt;&lt;span class=&#34;org-comment-delimiter&#34;&gt;;; &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Variables&lt;/span&gt;
&lt;span class=&#34;org-rainbow-delimiters-depth-1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-keyword&#34;&gt;setq&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;vdf-base-directory&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;~/desktop/org/notes/vdf/&#34;&lt;/span&gt;
      &lt;span class=&#34;org-rainbow-identifiers-identifier-11&#34;&gt;vdf-site-directory&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;~/src/github/vdemeester/vdemeester.github.com&#34;&lt;/span&gt;
      &lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;vdf-publishing-directory&lt;/span&gt; &lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;expand-file-name&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;_posts&#34;&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-11&#34;&gt;vdf-site-directory&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;vdf-css-publishing-directory&lt;/span&gt; &lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;expand-file-name&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;css&#34;&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-11&#34;&gt;vdf-site-directory&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;vdf-assets-publishing-directory&lt;/span&gt; &lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;expand-file-name&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;assets&#34;&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-11&#34;&gt;vdf-site-directory&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-1&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;org-comment-delimiter&#34;&gt;;; &lt;/span&gt;&lt;span class=&#34;org-comment&#34;&gt;Project&lt;/span&gt;
&lt;span class=&#34;org-rainbow-delimiters-depth-1&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-keyword&#34;&gt;setq&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-12&#34;&gt;org-publish-project-alist&lt;/span&gt;
      `&lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&#34;vdf-notes&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:base-directory&lt;/span&gt; ,&lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;vdf-base-directory&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:base-extension&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;org&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:publishing-directory&lt;/span&gt; ,&lt;span class=&#34;org-rainbow-identifiers-identifier-4&#34;&gt;vdf-publishing-directory&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:exclude&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;FIXME&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:section-numbers&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;nil&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:with-toc&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;nil&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:with-drawers&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:htmlized-source&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:publishing-function&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-7&#34;&gt;org-html-publish-to-html&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:headline-levels&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;4&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:body-only&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&#34;vdf-static-css&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:base-directory&lt;/span&gt; ,&lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;vdf-base-directory&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:base-extension&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;css&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:publishing-directory&lt;/span&gt; ,&lt;span class=&#34;org-rainbow-identifiers-identifier-2&#34;&gt;vdf-css-publishing-directory&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:recursive&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:publishing-function&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;org-publish-attachment&lt;/span&gt;
         &lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&#34;vdf-static-assets&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:base-directory&lt;/span&gt; ,&lt;span class=&#34;org-rainbow-identifiers-identifier-9&#34;&gt;vdf-base-directory&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:base-extension&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;png&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-backslash&#34;&gt;\\&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-construct&#34;&gt;|&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;jpg&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-backslash&#34;&gt;\\&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-construct&#34;&gt;|&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;gif&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-backslash&#34;&gt;\\&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-construct&#34;&gt;|&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;pdf&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-backslash&#34;&gt;\\&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-construct&#34;&gt;|&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;mp3&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-backslash&#34;&gt;\\&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&lt;span class=&#34;org-regexp-grouping-construct&#34;&gt;|&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;ogg&#34;&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:publishing-directory&lt;/span&gt; ,&lt;span class=&#34;org-rainbow-identifiers-identifier-15&#34;&gt;vdf-assets-publishing-directory&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:recursive&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-8&#34;&gt;t&lt;/span&gt;
         &lt;span class=&#34;org-builtin&#34;&gt;:publishing-function&lt;/span&gt; &lt;span class=&#34;org-rainbow-identifiers-identifier-5&#34;&gt;org-publish-attachment&lt;/span&gt;
         &lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&#34;vdf&#34;&lt;/span&gt; &lt;span class=&#34;org-builtin&#34;&gt;:components&lt;/span&gt; &lt;span class=&#34;org-rainbow-delimiters-depth-4&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;org-string&#34;&gt;&#34;vdf-notes&#34;&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;vdf-static-css&#34;&lt;/span&gt; &lt;span class=&#34;org-string&#34;&gt;&#34;vdf-static-assets&#34;&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-4&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-3&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;org-rainbow-delimiters-depth-2&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;org-rainbow-delimiters-depth-1&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;
J&#39;utilise des variables, c&#39;est pas indispensable mais c&#39;est plus pratique. Il y a trois &lt;i&gt;components&lt;/i&gt;, chacun d√©finit les fichiers qu&#39;il traite gr√¢ce √† &lt;code&gt;:base-extension&lt;/code&gt;. Int√©ressons-nous surtout √† &lt;code&gt;vdf-notes&lt;/code&gt; puisque c&#39;est celui qui nous sort les fichiers &lt;code&gt;HTML&lt;/code&gt; √† partir des fichiers &lt;code&gt;org&lt;/code&gt;. On se passe de table des mati√®res gr√¢ce √† &lt;code&gt;:with-toc nil&lt;/code&gt;, on ne g√©n√®re que le &lt;i&gt;body&lt;/i&gt; gr√¢ce √† &lt;code&gt;:body-only t&lt;/code&gt; et on √©vite les num√©ros de sections avec &lt;code&gt;:section-numbers nil&lt;/code&gt;. Le bonus vient avec &lt;code&gt;:htmlized-source t&lt;/code&gt; puisque du coup, les parties sources (entre &lt;code&gt;#+BEGIN_SRC&lt;/code&gt; et &lt;code&gt;#+END_SRC&lt;/code&gt;) sont export√©s avec les m√™mes couleurs que j&#39;ai dans ma configuration Emacs (avec les &lt;a href=&#34;https://github.com/vdemeester/emacs-config#raindow-identifiers&#34;&gt;rainbow-identifiers&lt;/a&gt;, voir ce post &lt;a href=&#34;https://medium.com/@evnbr/coding-in-color-3a6db2743a1e&#34;&gt;l√†&lt;/a&gt; √©galement).
&lt;/p&gt;

&lt;p&gt;
Il ne reste plus qu&#39;√† publier le projet quand on le souhaite avec &lt;code&gt;org-publish&lt;/code&gt; ‚Äî je vous laisse lire la documentation pour savoir comment on fait.
&lt;/p&gt;

&lt;p&gt;
Et c&#39;est tout bon. Un petit &lt;code&gt;bundle exec jekyll serve --watch&lt;/code&gt; pour voir le rendu ‚Äî et quand on est content on commit. Et c&#39;est la f√™te &lt;code&gt;\o/&lt;/code&gt;.
&lt;/p&gt;

&lt;p&gt;
C&#39;est tout pour le moment, la fr√©quence des billets de ce blog devrait s&#39;incr√©menter un peu maintenant.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Docker 1.3 et son √©cosyst√®me</title>
      <link>http://vincent.demeester.fr/posts/2014-10-27-docker-1.3-ecosystem/</link>
      <pubDate>Mon, 27 Oct 2014 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2014-10-27-docker-1.3-ecosystem/</guid>
      <description>&lt;div class=&#34;notice&#34;&gt;Cet article est disponible sur le &lt;a href=&#34;http://blog.zenika.com/&#34;&gt;Blog de Zenika&lt;/a&gt; √† l&#39;adresse suivante : &lt;a href=&#34;http://blog.zenika.com/index.php?post/2014/10/27/Docker-1-3-et-son-ecosysteme&#34;&gt;http://blog.zenika.com/index.php?post/2014/10/27/Docker-1-3-et-son-ecosysteme&lt;/a&gt;. Cet publication me sert de mirroir / sauvegarde.&lt;/div&gt;

&lt;p&gt;Le &lt;strong&gt;16 octobre dernier&lt;/strong&gt;, &lt;ins&gt;Docker est pass√© en version 1.3&lt;/ins&gt;. C&#39;est une
bonne occasion de faire un point sur ce qu&#39;apportent les mises √† jour
qui sont sorties depuis la 1.0. Nous allons √©galement en profiter pour
regarder les news &lt;strong&gt;importantes&lt;/strong&gt; de l&#39;√©cosyst√®me Docker.&lt;/p&gt;


&lt;p&gt;&lt;img src=&#34;http://vincent.demeester.fr/public/Billet_0511/docker_container_engine_logo.png&#34; alt=&#34;Docker&#34; title=&#34;Docker&#34; /&gt;&lt;/p&gt;


&lt;p&gt;Rappel tr√®s rapide, &lt;strong&gt;Docker est une plate-forme ouverte √† destination des d√©veloppeurs et administrateurs syst√®mes visant √† faciliter la construction et le d√©ploiement d&#39;applications distribu√©es&lt;/strong&gt;. De mani√®re
moins marketing, l&#39;id√©e derri√®re Docker est d&#39;&lt;strong&gt;automatiser&lt;/strong&gt; le &lt;strong&gt;d√©ploiement&lt;/strong&gt; d&#39;environnements sous forme de &lt;strong&gt;conteneurs l√©gers&lt;/strong&gt;, portables et auto-suffisants&amp;nbsp;; les conteneurs permettant d&#39;isoler
l&#39;ex√©cution des applications dans des contextes d&#39;ex√©cution. Pour ce
faire, Docker, √©cris en &lt;a href=&#34;http://golang.org/&#34;&gt;Go&lt;/a&gt;, reprend les bases de &lt;strong&gt;LXC&lt;/strong&gt;, utilise les fonctionnalit√©s
du &lt;strong&gt;noyau Linux&lt;/strong&gt; (CGroups, Namespaces, ‚Ä¶) et se base &lt;em&gt;initialement&lt;/em&gt; sur un
syst√®me de fichier &#34;en oignons&#34; AUFS&amp;nbsp;; D&#39;autres backend sont support√©s
√©galement comme BTRFS ou &lt;em&gt;devicemapper&lt;/em&gt; (LVM).&lt;/p&gt;


&lt;p&gt;Depuis le 9 juin 2014 et la release de la version 1.0 &#34;production-read&#34;, l&#39;√©quipe derri√®re Docker n&#39;a pas chom√© et 3
nouvelles mises √† jour sont sorties depuis&amp;nbsp;; √† savoir que les
&lt;em&gt;releases&lt;/em&gt; de Docker se font √† un rythme pr√©-d√©fini, &#34;√†-la&#34; Linux,
tout ce qui est pr√™t et test√© est int√©gr√© √† la release qui
suit. Voyons, de fa√ßon non-exhaustive, quelles sont les princiales
am√©liorations apport√©es par ces diff√©rentes versions.&lt;/p&gt;

&lt;h4&gt;Hub&amp;nbsp;: Images officielles et language stack&lt;/h4&gt;


&lt;p&gt;Le &lt;strong&gt;Hub&lt;/strong&gt;, tel qu&#39;il a √©t√© nomm√© apr√®s la sortie de Docker 1.0 est &lt;strong&gt;un d√©p√¥t des images Docker&lt;/strong&gt; de tout-un-chacun qui souhaite les partager.&lt;/p&gt;


&lt;p&gt;Au d√©but de l&#39;√©t√©, Docker Inc. a annonc√© l&#39;apparition des &lt;strong&gt;d√©pots officiels&lt;/strong&gt;. L&#39;id√©e est d&#39;estampiller des images Docker comme officielles,
c&#39;est √† dire v√©rifi√©es et garanties comme √©tant issues et support√©es par
les mainteneurs des projets. De nombreuses images officielles existent
d√©j√† pour les principaux projets open-source, comme Ubuntu, MongoDB,
etc. Toute communaut√© open-source ou m√™me tout √©diteur logiciel peut
entrer en contact avec l&#39;√©quipe Docker pour voir son/ses images
estampill√©es &#34;officielles&#34;, apr√®s validation. Cette √©tiquette vient se
rajouter √† l&#39;√©tiquette &#34;&lt;em&gt;automated build repository&lt;/em&gt;&#34;, pr√©c√©dement
appel√©e &lt;em&gt;verified&lt;/em&gt; (ce qui pr√©tait √† confusion) qui donne la garantie
√† l&#39;utilisateur que l&#39;image a √©t√© construite de mani√®re automatique
par l&#39;infrastructure de Docker Inc. Il est √©galement √† noter que la version
1.3.0 de Docker apporte la v√©rification de la provenance et de
l&#39;int√©grit√© des images officielles via signature √©lectronique&amp;nbsp;; m√™me si
pour l&#39;instant c&#39;est en &lt;em&gt;work-in-progress&lt;/em&gt;.&lt;/p&gt;


&lt;p&gt;Un autre ajout r√©cent au Docker Hub, datant de fin septembre, vaut le
d√©tour&amp;nbsp;: les l&lt;strong&gt;anguage stack&lt;/strong&gt;, des images de bases &lt;em&gt;pre-construites&lt;/em&gt; avec tous les outils n√©cessaires pour faire tourner une application dans un langage donn√©. Un d√©veloppeur souhaitant rapidement construire
un conteneur avec, par exemple, une application Clojure, n&#39;a plus
besoin de &lt;em&gt;r√©inventer la roue&lt;/em&gt; (i.e. partir d&#39;une image de base, installer
le JDK, installer lein, etc.). Il lui suffit de partir d&#39;une des
&lt;em&gt;language stack&lt;/em&gt;, ici clojure.&lt;/p&gt;

&lt;pre class=&#34;bash code bash&#34; style=&#34;font-family:inherit&#34;&gt;FROM clojure
COPY . &lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;usr&lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;src&lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;app
WORKDIR &lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;usr&lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;src&lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;app
CMD &lt;span style=&#34;color: #7a0874; font-weight: bold;&#34;&gt;&amp;#91;&lt;/span&gt;&lt;span style=&#34;color: #ff0000;&#34;&gt;&amp;quot;lein&amp;quot;&lt;/span&gt;, &lt;span style=&#34;color: #ff0000;&#34;&gt;&amp;quot;run&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #7a0874; font-weight: bold;&#34;&gt;&amp;#93;&lt;/span&gt;&lt;/pre&gt;


&lt;h4&gt;Restart policies (1.2.0)&lt;/h4&gt;


&lt;p&gt;Docker 1.2 a apport√© une option en plus √† la commande &lt;code&gt;run&lt;/code&gt;&amp;nbsp;:
&lt;code&gt;--restart&lt;/code&gt;. Il permet de d√©finir une &lt;strong&gt;politique de red√©marrage&lt;/strong&gt; dans
le cas o√π le conteneurs viendrait √† mourrir, que ce soit de mani√®re
normale (code de retour √† 0) ou inattendue (&lt;em&gt;failure&lt;/em&gt;, code de retour
diff√©rent de 0). Trois options sont disponibles pour l&#39;instant&amp;nbsp;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;no&lt;/strong&gt;&amp;nbsp;: pas de red√©marrage, fonctionnement par d√©faut.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;on-failure&lt;/strong&gt;: red√©marrage automatique si le conteneur s&#39;est termin√© de fa√ßon anormale. Il est possible d&#39;ajouter un nombre maximum de red√©marrage&amp;nbsp;; avec &lt;code&gt;--restart=on-failure:3&lt;/code&gt; docker essaiera de red√©marrer 3 fois avant d&#39;abandonner.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;always&lt;/strong&gt;&amp;nbsp;: red√©marrage automatique, tout le temps, erreurs ou pas.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Injection de processus (1.3.0)&lt;/h4&gt;


&lt;p&gt;La possibilit√© de voir ce qui se passe dans le container, et par
cons√©quent de s&#39;en servir pour debugger, s&#39;est aver√© longtemps
complexe. Dans les &lt;em&gt;premiers jours&lt;/em&gt; de Docker, l&#39;installation d&#39;un
d√©mon ssh √©tait une solution commune. Cependant, cel√† complexifiait la
cr√©ation d&#39;un conteneur&amp;nbsp;; en effet, Docker est fait pour lancer et isoler
une seule commande, l&#39;ajout d&#39;un d√©mon sshd imposait alors de mettre
en place une solution du type &lt;em&gt;init&lt;/em&gt; comme supervisord, runit, ou
autres. Un article de J√©r√¥me Petazonni, employ√© Docker Inc,
a mis les choses au point&amp;nbsp;:
&lt;strong&gt;&lt;a href=&#34;http://jpetazzo.github.io/2014/06/23/docker-ssh-considered-evil/&#34;&gt;If you run SSHD in your Docker containers, you&#39;re doing it wrong!&lt;/a&gt;&lt;/strong&gt;,
litt√©ralement &#34;&lt;em&gt;Si vous faites tourner SSHD dans vos container Docker, vous vous trompez&lt;/em&gt;&#34;. J√©r√¥me avait cr√©√© √† l&#39;√©poque un outil,
&lt;a href=&#34;https://github.com/jpetazzo/nsenter&#34;&gt;nsenter&lt;/a&gt;, qui √©tait (et est toujours) installable en passant par un container, histoire de montrer
un peu de magie.&lt;/p&gt;


&lt;p&gt;La version 1.3 de Docker int√®gre un nouvelle commande, &lt;code&gt;exec&lt;/code&gt; qui
n&#39;est autre que nsenter, en mieux, directement int√©gr√© √† Docker, plus
besoin de passer par un outil externe. &lt;strong&gt;Il devient donc possible d&#39;executer n&#39;importe quelle process √† l&#39;int√©rieur donc container, qui est en cours d&#39;ex√©cution&lt;/strong&gt;. Ainsi un simple &lt;code&gt;docker exec -it ubuntu_bash bash&lt;/code&gt; et
nous voici dans une session bash √† l&#39;int√©rieur du conteneur. Bien
entendu, comme pour nsenter, cela ne change pas l&#39;id√©e derri√®re Docker
qui est &#34;une application par conteneur&#34;&amp;nbsp;; la commande &lt;code&gt;exec&lt;/code&gt; est
surtout pr√©sente pour r√©pondre √† des probl√©matiques de &lt;em&gt;debug&lt;/em&gt; et de
&lt;em&gt;developpement&lt;/em&gt;.&lt;/p&gt;


&lt;h4&gt;Cycle de vie d‚Äôun container (1.3.0)&lt;/h4&gt;


&lt;p&gt;Une autre nouvelle commande arrive avec la version 1.3.0 de Docker,
c&#39;est &lt;code&gt;create&lt;/code&gt;. Beaucoup d&#39;utilisateur ont demand√© d&#39;√™tre capable
de s√©parer la cr√©ation initiale de conteneur et son lancement&amp;nbsp;;
auparavant il n&#39;existait que la commande &lt;code&gt;run&lt;/code&gt; qui faisait les deux
d&#39;un coup.&lt;/p&gt;

&lt;pre class=&#34;bash code bash&#34; style=&#34;font-family:inherit&#34;&gt;$ docker create &lt;span style=&#34;color: #660033;&#34;&gt;-t&lt;/span&gt; &lt;span style=&#34;color: #660033;&#34;&gt;-i&lt;/span&gt; fedora &lt;span style=&#34;color: #c20cb9; font-weight: bold;&#34;&gt;bash&lt;/span&gt;
6d8af538ec541dd581ebc2a24153a28329acb5268abe5ef868c1f1a261221752
$ docker start &lt;span style=&#34;color: #660033;&#34;&gt;-a&lt;/span&gt; &lt;span style=&#34;color: #660033;&#34;&gt;-i&lt;/span&gt; 6d8af538ec5
bash-&lt;span style=&#34;color: #000000;&#34;&gt;4.2&lt;/span&gt;&lt;span style=&#34;color: #666666; font-style: italic;&#34;&gt;#&lt;/span&gt;&lt;/pre&gt;


&lt;h4&gt;Options de s√©curit√© (1.3.0)&lt;/h4&gt;


&lt;p&gt;Les utilisateurs de SELinux ou AppArmor vont √™tre content, la commande
&lt;code&gt;--security-opt&lt;/code&gt;, arriv√©e avec la version 1.3.0, permet les &lt;em&gt;labels&lt;/em&gt;
et &lt;em&gt;profiles&lt;/em&gt; de ces derniers, ce qui donne quelque chose comme&amp;nbsp;:&lt;/p&gt;

&lt;pre class=&#34;bash code bash&#34; style=&#34;font-family:inherit&#34;&gt;docker run &lt;span style=&#34;color: #660033;&#34;&gt;--security-opt&lt;/span&gt; label:&lt;span style=&#34;color: #7a0874; font-weight: bold;&#34;&gt;type&lt;/span&gt;:svirt_apache &lt;span style=&#34;color: #660033;&#34;&gt;-i&lt;/span&gt; &lt;span style=&#34;color: #660033;&#34;&gt;-t&lt;/span&gt; centos &lt;span style=&#34;color: #c20cb9; font-weight: bold;&#34;&gt;bash&lt;/span&gt;&lt;/pre&gt;


&lt;p&gt;L&#39;avantage principal de cette nouvelle commande, c&#39;est, sur
les syst√®mes qui sont configur√©s avec SELinux ou AppArmor, de pouvoir
donner des privil√®ges de mani√®re plus fine qu&#39;avec l&#39;option
&lt;code&gt;--privileged&lt;/code&gt; (qui donne tout) et ainsi diminuer les risques
potentiels.&lt;/p&gt;


&lt;h4&gt;Boot2docker&lt;/h4&gt;


&lt;p&gt;Docker s&#39;appuyant sur des fonctionnalit√©es de noyau Linux, son usage
est &lt;em&gt;limit√©&lt;/em&gt; √† un syst√®me h√¥te avec un noyau Linux. Le projet
boot2docker vise √† enlever cette barri√®re en &lt;strong&gt;permettant d&#39;avoir la commande docker sous Mac OS X et Windows&lt;/strong&gt;. Il s&#39;agit ni plus ni moins
d&#39;une machine virtuelle VirtualBox l√©g√®re, bas√©e sur la distribution
Tiny Core Linux, pour avoir un &lt;em&gt;overhead&lt;/em&gt; le plus faible possible.
L&#39;utilisation de boot2docker n&#39;est pas encore totalement transparente,
principalement pour la gestion des ports ou encore du montage des
volumes du Host (OS X ou Windows) dans le conteneur Docker. La version
1.3 de docker, et la version correspondante de boot2docker, permettent
maintenant aux utiliseurs de Mac OS X de monter leur dossier &lt;em&gt;h√¥tes&lt;/em&gt;
dans le conteneur.&lt;/p&gt;


&lt;h4&gt;Fig 1.0&lt;/h4&gt;


&lt;p&gt;&lt;a href=&#34;http://www.fig.sh/&#34;&gt;Fig&lt;/a&gt; est un outil de d√©veloppement bas√© sur Docker, √©crit en Python. L&#39;id√©e est de
d√©finir son environnement via un fichier YAML, que ce soit pour le
code sur lequel nous travaillons mais √©galement les services externes
desquels notre application d√©pend (Base de donn√©es, &#39;&#39;Message
queue&#39;&#39;, etc.).&lt;/p&gt;


&lt;p&gt;Nous avons donc, par exemple, un &lt;code&gt;Dockerfile&lt;/code&gt;&amp;nbsp;:&lt;/p&gt;

&lt;pre class=&#34;bash code bash&#34; style=&#34;font-family:inherit&#34;&gt;FROM clojure:lein-2.5.0
ADD . &lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;code
WORKDIR &lt;span style=&#34;color: #000000; font-weight: bold;&#34;&gt;/&lt;/span&gt;code
RUN lein run&lt;/pre&gt;



&lt;p&gt;Et un &lt;code&gt;fig.yml&lt;/code&gt;&amp;nbsp;:&lt;/p&gt;

&lt;pre&gt;[yaml]
web:
  build: .
  command: lein run
  links:
   - db
  ports:
   - &amp;quot;8000:8000&amp;quot;
db:
  image: postgres
&lt;/pre&gt;


&lt;p&gt;Enfin un petit &lt;code&gt;fig up&lt;/code&gt; et c&#39;est gagn√©, nous obtenons notre base de donn√©es
relationnelle qui tourne, notre appli qui a √©t√© construite et qui
tourne aussi, et qui est li√© √† notre conteneur db. Il existe bien d&#39;autres
commandes (&lt;code&gt;start&lt;/code&gt;, &lt;code&gt;stop&lt;/code&gt;, &lt;code&gt;destroy&lt;/code&gt;, etc.).&lt;/p&gt;


&lt;p&gt;Fig √©tait initialement d√©velopp√© par &lt;a href=&#34;https://www.orchardup.com/&#34;&gt;Orchard&lt;/a&gt;, qui a √©t√© acquis cette
ann√©e par Docker Inc. Ce 17 octobre, l&#39;√©quipe Docker a donc fait un release 1.0 de
Fig en ajoutant le support √† docker 1.3 et √† boot2docker. Un certain nombre de commandes et de
nouvelles fonctionnalit√©es ont √©t√©s ajout√©es, notament&amp;nbsp;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;fig port&lt;/code&gt;, qui liste les ports par service,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fig pull&lt;/code&gt;, qui r√©cup√®re la derni√®re version d&#39;un service,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fig restart&lt;/code&gt;, qui red√©marre les conteneurs (&lt;code&gt;stop&lt;/code&gt; et &lt;code&gt;start&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;le support de &lt;code&gt;.dockerignore&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;le support de connection en TLS au daemon Docker&lt;/li&gt;
&lt;li&gt;et pas mal d&#39;autres options.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Mais l&#39;annonce principale accompagnant cette version est que &lt;strong&gt;Fig ne recevra plus de mise √† jour majeure √† partir de cette version 1.0&lt;/strong&gt;
puisque l&#39;√©quipe Docker travaille pour &lt;strong&gt;int√©grer les fonctionnalit√©s&lt;/strong&gt;
que Fig apporte, &lt;strong&gt;directement dans Docker&lt;/strong&gt;&amp;nbsp;; ce qui est une
excellente nouvelle.&lt;/p&gt;


&lt;h4&gt;Partenariat avec Microsoft&lt;/h4&gt;


&lt;p&gt;Cela transpirait ces derniers mois, dans les diff√©rentes conf√©rences
et meetups, Microsoft s&#39;int√©ressait de tr√®s pr√™t √† Docker. C&#39;est
maintenant officiel, &lt;strong&gt;Docker Inc et Microsoft sont partenaires&lt;/strong&gt;. Le
partenariat couvre pour l&#39;instant les sujets suivants&amp;nbsp;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ajouter le support de windows comme h√¥te Docker.&lt;/li&gt;
&lt;li&gt;Pour Microsoft, supporter les API &lt;em&gt;open-orchestration&lt;/em&gt; de Docker.&lt;/li&gt;
&lt;li&gt;Int√©gration de Docker dans Microsoft Azure.&lt;/li&gt;
&lt;li&gt;Collaboration √©troite sur les applications qui ont besoin de plusieurs conteneur (i.e. ce que Fig fait de mieux), et le support d&#39;application qui sont compos√©s de conteneurs Linux et Windows.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Le but &lt;em&gt;ultime&lt;/em&gt; de Docker quand il a √©t√© distribu√© de fa√ßon libre
√©tait&amp;nbsp;: &#34;__Construire le &#39;bouton&#39; qui permet √† toutes applications
d&#39;√™tre construites et d√©ploy√©es sur n&#39;importe quel serveur, n&#39;importe
o√π.__&#34; (C&#39;est nettement plus classe en anglais&amp;nbsp;: ‚Äú&#39;&#39;To build the ‚Äòbutton‚Äô
that enables any application to be built and deployed on any server,
anywhere.&#39;&#39;‚Äù). Ce partenariat est donc une nouvelle marche en direction
de ce dernier.&lt;/p&gt;


&lt;h4&gt;Conclusion&lt;/h4&gt;


&lt;p&gt;Un an et demi apr√®s la premi√®re &lt;em&gt;release&lt;/em&gt; publique de Docker et pr√®s
de 5 mois apr√®s la version 1.0, Docker et sa communaut√© avancent
toujours aussi vite. Comme Solomon Hykes (CTO et co-fondateur de dotCould)
avait dit lors de la dockerCon 14&amp;nbsp;: &#34;&lt;strong&gt;la valeur r√©elle de docker n&#39;est pas la technologie, mais le fait que les gens se mettent d&#39;accord sur quelque chose&lt;/strong&gt;&#34;&amp;nbsp;; Docker Inc. pousse principalement dans le sens de la
standardisation. Le d√©veloppement de
&lt;a href=&#34;https://github.com/docker/libcontainer&#34;&gt;libcontainer&lt;/a&gt;,
&lt;a href=&#34;https://github.com/docker/libchan&#34;&gt;libchan&lt;/a&gt; et
&lt;a href=&#34;https://github.com/docker/libswarm&#34;&gt;libswarm&lt;/a&gt; sont des projets qui
vont dans ce sens. La communaut√©e est toute aussi &lt;em&gt;bouillante&lt;/em&gt; d&#39;id√©es
et chaque jour voit de nouveau projet plus int√©ressant les uns que les
autres.&lt;/p&gt;


&lt;p&gt;Enfin la &lt;strong&gt;&lt;a href=&#34;http://europe.dockercon.com/&#34;&gt;dockerCon Europe&lt;/a&gt;, les 4 et 5 d√©cembre 2014&lt;/strong&gt; viendra couronner une ann√©e tr√®s riche du c√¥t√© de Docker et
de son √©cosyst√®me. Rendez-vous mi-d√©cembre pour faire un petit retour
  sur la premi√®re conf√©rence europ√©enne Docker ;-).&lt;/&gt;

</description>
    </item>
    
    <item>
      <title>Redesign Et R√©solutions</title>
      <link>http://vincent.demeester.fr/posts/2014-03-24-redesign-et-r%C3%A9solutions/</link>
      <pubDate>Mon, 24 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2014-03-24-redesign-et-r%C3%A9solutions/</guid>
      <description>

&lt;p&gt;Un &lt;em&gt;tout petit&lt;/em&gt; post pour parler rapidement, entre autre, du redesign de &lt;a href=&#34;http://vincent.demeester.fr&#34;&gt;vincent.demeester.fr&lt;/a&gt; et de mes r√©solutions.&lt;/p&gt;

&lt;h2 id=&#34;redesign&#34;&gt;Redesign&lt;/h2&gt;

&lt;p&gt;Les raisons de ce redesign sont assez simple : je change d&amp;rsquo;employeur et de ville (retour sur Paris &lt;code&gt;\o/&lt;/code&gt;).
Cela fait pas mal de changement, et en voulant mettre √† jour la page d&amp;rsquo;accueil (ce que je n&amp;rsquo;ai toujours pas
fait &lt;code&gt;;-P&lt;/code&gt;), j&amp;rsquo;avais envie de &lt;em&gt;d√©m√©nager&lt;/em&gt; le site en quelques sortes.&lt;/p&gt;

&lt;p&gt;Pour l&amp;rsquo;inspiration c&amp;rsquo;est assez facile √† trouver, regarder &lt;a href=&#34;http://medium.com&#34;&gt;medium&lt;/a&gt;, le site de
&lt;a href=&#34;http://www.viksit.com/&#34;&gt;Viksit Gaur&lt;/a&gt; ou encore celui de &lt;a href=&#34;http://silent-strength.com/&#34;&gt;Michael&lt;/a&gt; (coucou &lt;code&gt;:-P&lt;/code&gt;).
J&amp;rsquo;adore ce genre de site, assez √©pur√© mais avec une partie fixe (√† gauche ou √† droite) et avec des images changeantes.&lt;/p&gt;

&lt;p&gt;Les images en fond de l&amp;rsquo;espace de gauche peuvent changer d&amp;rsquo;une page √† l&amp;rsquo;autre. Je suis en train de m&amp;rsquo;amuser un peu
avec &lt;a href=&#34;http://jekyllrb.com&#34;&gt;Jekyll&lt;/a&gt;. Il faut que je trouve un moyen d&amp;rsquo;optimiser un peu les images que j&amp;rsquo;utilise
parce que l√† je joue un peu le bourrin.&lt;/p&gt;

&lt;h2 id=&#34;r√©solutions&#34;&gt;R√©solutions&lt;/h2&gt;

&lt;p&gt;Nouvelle ann√©e, nouveau boulot, implique nouvelles r√©solutions. Il y a deux aspects √† ces &lt;em&gt;r√©solutions&lt;/em&gt; : sur un plan
informatique/geek/travail/organisation, et sur un plan purement &lt;em&gt;physique&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Mon retour sur Paris devrait me permettre de participer √† un peu plus d&amp;rsquo;√©v√®nements, notamment du c√¥t√© des Java User Group, mais
aussi FSFE, et j&amp;rsquo;en passe. Je compte √©galement continu√© √† jouer le &lt;em&gt;factotum&lt;/em&gt; en me gardant un peu de temps au niveau
personnel pour travailler sur des aspects &lt;em&gt;geek&lt;/em&gt; que je n&amp;rsquo;aurais peut-√™tre pas l&amp;rsquo;occasion de pratiquer au travail.
Au niveau de mes &lt;em&gt;points d&amp;rsquo;entr√©es&lt;/em&gt; sur le web, je compte remettre un peu en route la partie blog de ce site et
tourner shortbrain.org (ou autre) en un site plus &amp;ldquo;documentation&amp;rdquo; en me basant sur mes notes (powered by &lt;a href=&#34;http://org-mode.org&#34;&gt;org-mode&lt;/a&gt;).
Je me suis √©galement remis √† &lt;a href=&#34;https://www.gnu.org/software/emacs/&#34;&gt;Gnu Emacs&lt;/a&gt; et &lt;em&gt;oh god&lt;/em&gt; qu&amp;rsquo;est-ce que c&amp;rsquo;est bon &lt;code&gt;:-D&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Au niveau phyisque, dans la continuit√© de la fin 2012, l&amp;rsquo;ann√©e 2013 a probablement √©t√© la pire de ma vie. Les
probl√®mes de dos c&amp;rsquo;est pas facile tous les jours.. En f√©vrier, j&amp;rsquo;avais peur de ne jamais remonter sur un v√©lo ; en Mai
je remontais pour la premi√®re fois sur le v√©lo, en Septembre je faisais 40km par semaine et en d√©cembre j&amp;rsquo;√©tais
presque capable de faire 30km en une journ√©e. M√®me si l&amp;rsquo;ann√©e 2014 a mal commenc√© (je me suis fel√© un c√¥te en Janvier),
mes objectifs pour cette ann√©e et les futurs sont nettement plus positif. Le &lt;a href=&#34;http://fitbit.com&#34;&gt;fitbit&lt;/a&gt; que j&amp;rsquo;ai
acquis en F√©vrier me permet d&amp;rsquo;avoir un objectif de marche (certes assez modeste) de 10000 pas et 8,05 km par jour.
Je compte bien me fixer d&amp;rsquo;autre objectifs : monter la barre plus haut (15000 voir plus), faire 50km de v√©lo
sur une journ√©e.&lt;/p&gt;

&lt;p&gt;Les objectifs physiques √† tr√®s long termes sont √©galement assez simples : retrouver ma forme physique et ne plus √™tre
g√©n√© √† cause du dos. En gros c&amp;rsquo;est : √™tre capable de faire 120km de v√©lo et monter des cols (Col du Sapenay, Mont Revard)
et √† long terme, faire des courses de footing (i.e. 10km, Paris-Versaille, Semi-marathon, marathon :D).&lt;/p&gt;

&lt;p&gt;Sur ce, je vais retourner √† mes cartons :-P.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Podcasts</title>
      <link>http://vincent.demeester.fr/posts/2013-10-12-podcasts/</link>
      <pubDate>Sat, 12 Oct 2013 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2013-10-12-podcasts/</guid>
      <description>

&lt;blockquote&gt;
&lt;p&gt;Voici un petit billet pr√©sentant les diff√©rents podcast que j&amp;rsquo;√©coute plus ou
moins r√©guli√®rement.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;J&amp;rsquo;√©coute √©norm√©ment de musique et de podcast ; je passe beaucoup de temps avec
des √©couteurs sur la t√™te ou la chaine hifi en route. Les podcasts ont une grande
place. Voici une liste plus ou moins bien tri√©s de ceux auxquels je suis
souscrit et/ou que j&amp;rsquo;√©coute en ce moment. Je tiendrais peut-√™tre ce post
√† jour ou en cr√©erait un nouveau sinon :-).&lt;/p&gt;

&lt;h2 id=&#34;geek-co&#34;&gt;Geek &amp;amp; co&lt;/h2&gt;

&lt;p&gt;Je suis un developpeur, un geek et convaincu des logiciels libres, les
podcasts qui suivent refl√®te assez cette partie l√† de mon identit√©.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.captainweb.net/&#34;&gt;L&amp;rsquo;ap√©ro de Captain (fr)&lt;/a&gt; : dans le genre geeky, d√©jant√© et sauvage, en fran√ßais, on ne fait pas mieux. Pas vraiment safe for work, et pas tout √† fait &amp;ldquo;libriste&amp;rdquo; comme j&amp;rsquo;aime, les tranches de rires sont garanties ; m√™me si parfois on est un peu verreux d&amp;rsquo;avoir √©couter jusqu&amp;rsquo;√† la fin et le bien nomm√© &amp;ldquo;wazzuf&amp;rdquo;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.agencetousgeeks.com/&#34;&gt;Agence Tous Geeks (fr)&lt;/a&gt; : fils cach√© de l&amp;rsquo;ap√©ro du captain, on y retrouve des amis (et membres de ce dernier), mais c&amp;rsquo;est un peu plus calme.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://bazingcast.com/about/&#34;&gt;Bazingcast (fr)&lt;/a&gt; : podcast geek, plus pos√© que les deux pr√©c√©dents mais avec
des d√©bats, des trolls et tout ce que l&amp;rsquo;on peut attendre de geeks.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.captainposix.net/&#34;&gt;Parole de Tux (fr-be)&lt;/a&gt; : podcast venant de nos voisin belge, pas trop long et plut√¥t sympa ; et si comme moi vous adorez l&amp;rsquo;accent belge, c&amp;rsquo;est le top.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://faif.us/&#34;&gt;Free as in Freedom (en)&lt;/a&gt; : podcast parlant de logiciel
libre principalement c√¥t√© license, truc l√©gal, etc.. en anglais, faut
parfois s&amp;rsquo;accrocher.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://episodes.gitminutes.com/&#34;&gt;Git Minutes (en)&lt;/a&gt; : podcast √† propos de
Git et des outils de son √©cosyst√®me (vcsh, etc..).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;radio&#34;&gt;Radio&lt;/h2&gt;

&lt;p&gt;J&amp;rsquo;aime bien la radio, bien plus que la t√©l√©vision (que j&amp;rsquo;allume si peu qu&amp;rsquo;√†
chaque fois la box se met √† jour &lt;code&gt;;-p&lt;/code&gt;).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.franceinter.fr/emission-laura-leishman-project&#34;&gt;France Inter - LLP (Laura leishman Project)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://radiofrance-podcast.net/podcast09/rss_12265.xml&#34;&gt;Le Mouv&amp;rsquo; - Laura Leishman Project&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.franceinter.fr/emission-interception&#34;&gt;France Inter - Interception&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.la-bas.org/&#34;&gt;France Inter - l√†-bas si j&amp;rsquo;y suis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.franceculture.fr/podcast/4689840&#34;&gt;France Culture - Pixel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.franceculture.fr/podcast/4685228&#34;&gt;France Culture - Place de la toile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.franceculture.fr/podcast/4689418&#34;&gt;France Culture - Philippe Meyer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://radiofrance-podcast.net/podcast09/rss_12582.xml&#34;&gt;Le Mouv&amp;rsquo; - Glitch (sur le Mouv&amp;rsquo;)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://radiofrance-podcast.net/podcast09/rss_12691.xml&#34;&gt;Le Mouv&amp;rsquo; - Code Source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://radiofrance-podcast.net/podcast09/rss_12190.xml&#34;&gt;Le Mouv&amp;rsquo; - Suivez le geek&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.divergence-fm.org/-http-www-divergence-fm-org-ecrire-exec-rubrique-id_rubrique-61-.html&#34;&gt;Divergence Numerique&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;musique&#34;&gt;Musique&lt;/h2&gt;

&lt;p&gt;Les podcast suivant sont purement musique, tous musique &lt;em&gt;techno&lt;/em&gt; ou
trance (que j&amp;rsquo;aime bien).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://podcasts.flaix.fr/corstencountdown&#34;&gt;Ferry Corsten - Corsten Countdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.galexmusic.com/podcast/gareth.xml&#34;&gt;Gareth Emery Podcast&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://feedproxy.feedburner.com/Tiestos_club_life&#34;&gt;Tiesto Club Life&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://oakenfold.libsyn.com/rss&#34;&gt;Oakenfold Perfecto Podcast&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Maven Tmpfs</title>
      <link>http://vincent.demeester.fr/posts/2013-09-08-maven-tmpfs/</link>
      <pubDate>Sun, 08 Sep 2013 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2013-09-08-maven-tmpfs/</guid>
      <description>&lt;p&gt;Je suis un utilisateur convaincu de [maven](), malgr√© ces d√©fauts, le moto
&lt;strong&gt;&amp;ldquo;Convention over configuration&amp;rdquo;&lt;/strong&gt; me va vraiment bien. Que ce soit au boulot ou
√† la maison, j&amp;rsquo;ai plus d&amp;rsquo;ordinateurs √©quip√©s de ssd (ou de m√©moire flash) que de
disque traditionnel (m√©canique ?). Pour augmenter un peu la dur√©e de vie de
ces disques SSD, j&amp;rsquo;ai cherch√© √† savoir comment &lt;em&gt;d√©porter&lt;/em&gt; le &lt;em&gt;build&lt;/em&gt; de maven
(qui, pour rappel, se passe dans le dossier &lt;code&gt;target/&lt;/code&gt;) hors du SSD ; ici ce
sera dans le dossier &lt;code&gt;/tmp/&lt;/code&gt; qui est mont√© en m√©moire (merci &lt;code&gt;tmpfs&lt;/code&gt;),
mais on peut imaginer d√©porter √ßa sur un autre disque, etc.. Apr√®s quelques
recherches j&amp;rsquo;ai trouv√©s quelques inspirations.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Limitations&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Dans la solution pr√©sent√©e ci-dessous les principales limitations sont
les suivantes (que j&amp;rsquo;essaierais de diminuer au fil du temp ;P) :&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Il est n√©cessaire de modifier le pom.xml du projet ; cela ne s&amp;rsquo;appliquera
donc pas √† tous les projets maven sans modification du pom.xml.&lt;/li&gt;
&lt;li&gt;Cela ne fonctionne que sur une plateforme qui support les liens
symboliques (Linux, Mac OS X, et autre UNIX).&lt;/li&gt;
&lt;li&gt;Cela ne fonctionne qu&amp;rsquo;avec Java 7 ou plus.&lt;/li&gt;
&lt;li&gt;Si vous utilisez m2e, il va gentillement gueuler et c&amp;rsquo;est moche ; pour
r√©soudre le probl√®me, il faut faire un tour vers &lt;a href=&#34;http://wiki.eclipse.org/M2E_plugin_execution_not_covered&#34;&gt;M2E plugin execution
not covered&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Pour [maven](), le dossier &lt;code&gt;target/&lt;/code&gt; vient de la propri√©t√©
&lt;code&gt;project.build.directory&lt;/code&gt;. Dans la th√©orie, il suffirait de modifier (dans
&lt;code&gt;$HOME/.m2/settings.xml&lt;/code&gt;) cette propri√©t√© et le tour serait jouer.
Malheuresement ce n&amp;rsquo;est pas possible, &lt;code&gt;project.build.directory&lt;/code&gt; est une
propri√©t√© interne et n&amp;rsquo;est, √† priori, pas modifiable.&lt;/p&gt;

&lt;p&gt;Notre souhait est le suivant :&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Le build doit se faire dans &lt;code&gt;/tmp/m2/&lt;/code&gt;, ce qui pour un projet se traduit
par &lt;code&gt;/tmp/m2/${groupId}:${artifactId}&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Le dossier &lt;code&gt;target/&lt;/code&gt; dans les sources est un lien symbolique vers le
dossier dans &lt;code&gt;/tmp/m2/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;On passe par un &lt;strong&gt;profile&lt;/strong&gt; qui n&amp;rsquo;est &lt;strong&gt;pas actif&lt;/strong&gt; par d√©faut (pour ne pas
faire chier le monde) mais &lt;strong&gt;activable via une propri√©t√©&lt;/strong&gt; (maven nous permet
de le faire et c&amp;rsquo;est cool &lt;code&gt;^_^&lt;/code&gt;). La propri√©t√© utilis√©e sera
&lt;code&gt;external.build.root&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Le code ci-dessous est repris directement de mon inspiration&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:inspiration&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:inspiration&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;. Il
s&amp;rsquo;occupe de cr√©er le dossier &lt;code&gt;${groupId}:${artifactId}&lt;/code&gt; dans
&lt;code&gt;external.build.root&lt;/code&gt; et de faire le lien dans le dossier courant.&lt;/p&gt;


&lt;project&gt;
    &lt;!-- [‚Ä¶] --&gt;
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;external-build-dir&lt;/id&gt;
            &lt;activation&gt;
                &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;
                &lt;property&gt;
                    &lt;name&gt;external.build.root&lt;/name&gt;
                &lt;/property&gt;
            &lt;/activation&gt;
            &lt;build&gt;
                &lt;plugins&gt;
                    &lt;plugin&gt;
                        &lt;groupId&gt;com.alexecollins.maven.plugin&lt;/groupId&gt;
                        &lt;artifactId&gt;script-maven-plugin&lt;/artifactId&gt;
                        &lt;version&gt;1.0.0&lt;/version&gt;
                        &lt;executions&gt;
                            &lt;execution&gt;
                                &lt;id&gt;prep-work-tree&lt;/id&gt;
                                &lt;goals&gt;
                                    &lt;goal&gt;execute&lt;/goal&gt;
                                &lt;/goals&gt;
                                &lt;phase&gt;initialize&lt;/phase&gt;
                                &lt;configuration&gt;
                                    &lt;script&gt;
                                        import java.nio.file.*
                                        def dir =
                                        &#34;${external.build.root}/${project.groupId}:${project.artifactId}&#34;
                                        println &#34;using Maven dir ${dir}&#34;
                                        def dirPath = Paths.get(dir)
                                        if (!Files.exists(dirPath)) {
                                        Files.createDirectories(dirPath)
                                        }
                                        def target = Paths.get(&#34;${project.build.directory}&#34;)
                                        if (!Files.exists(target)) {
                                        Files.createSymbolicLink(target, dirPath)
                                        }&lt;/script&gt;
                                &lt;/configuration&gt;
                            &lt;/execution&gt;
                            &lt;execution&gt;
                                &lt;id&gt;drop-symlink&lt;/id&gt;
                                &lt;goals&gt;
                                    &lt;goal&gt;execute&lt;/goal&gt;
                                &lt;/goals&gt;
                                &lt;phase&gt;clean&lt;/phase&gt;
                                &lt;configuration&gt;
                                    &lt;script&gt;
                                        import java.nio.file.*
                                        def target = Paths.get(&#34;${project.build.directory}&#34;)
                                        if (Files.isSymbolicLink(target)) {
                                        Files.delete(target)
                                        }
                                    &lt;/script&gt;
                                &lt;/configuration&gt;
                            &lt;/execution&gt;
                        &lt;/executions&gt;
                        &lt;dependencies&gt;
                            &lt;dependency&gt;
                                &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
                                &lt;artifactId&gt;groovy&lt;/artifactId&gt;
                                &lt;version&gt;1.8.6&lt;/version&gt;
                            &lt;/dependency&gt;
                        &lt;/dependencies&gt;
                        &lt;configuration&gt;
                            &lt;language&gt;groovy&lt;/language&gt;
                        &lt;/configuration&gt;
                    &lt;/plugin&gt;
                &lt;/plugins&gt;
            &lt;/build&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
    &lt;!-- [‚Ä¶] --&gt;
&lt;/project&gt;


&lt;p&gt;Ainsi, il suffit ensuite d&amp;rsquo;avoir quelques choses du genre dans son
&lt;code&gt;$HOME/.m2/settings.xml&lt;/code&gt; pour que les builds qui ont ce profil se &lt;em&gt;build&lt;/em&gt;
dans &lt;code&gt;/tmp/m2/&lt;/code&gt;. On peut aussi ne rien avoir dans &lt;code&gt;$HOME/.m2/settings.xml&lt;/code&gt;
et utilise &lt;code&gt;-Dexternal.build.root=/tmp/m2/&lt;/code&gt; avec la commande &lt;code&gt;mvn&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;
&lt;settings&gt;
    &lt;!-- [‚Ä¶] --&gt;
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;build-in-ramfs&lt;/id&gt;
            &lt;properties&gt;
                &lt;external.build.root&gt;/tmp/m2/&lt;/external.build.root&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;
    &lt;activeProfiles&gt;
        &lt;activeProfile&gt;build-in-ramfs&lt;/activeProfile&gt;
    &lt;/activeProfiles&gt;
    &lt;!-- [‚Ä¶] --&gt;
&lt;/settings&gt;
&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:inspiration&#34;&gt;&lt;a href=&#34;http://elehack.net/writings/programming/maven-target-in-tmpfs&#34;&gt;Putting Maven build directories out-of-tree&lt;/a&gt; par &lt;a href=&#34;http://elehack.net/&#34;&gt;Michal Ekstrand&lt;/a&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:inspiration&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Gollum Comme Wiki Personnel</title>
      <link>http://vincent.demeester.fr/posts/2012-12-16-gollum-comme-wiki-personnel/</link>
      <pubDate>Sun, 16 Dec 2012 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2012-12-16-gollum-comme-wiki-personnel/</guid>
      <description>

&lt;p&gt;Il y a environ 4 mois j&amp;rsquo;ai eu un accident de v√©lo ; un traumatisme cr√¢nien, des brulures sur la face, quelques points de sutures, un doigt cass√© et une hernie discale m&amp;rsquo;ont clou√© (et me clou encore) plus que d&amp;rsquo;habitude sur ma chaise de bureau. Le bon c√¥t√© des choses, c&amp;rsquo;est que cela m&amp;rsquo;a permit de me poser et de r√©fl√©chir une bonne fa√ßon d&amp;rsquo;√™tre efficace et organiser, au travail et √† la maison :-).&lt;/p&gt;

&lt;p&gt;Une des principales &lt;em&gt;action&lt;/em&gt; que j&amp;rsquo;ai pris est d&amp;rsquo;utiliser un wiki local et synchronis√© sur &lt;em&gt;tout&lt;/em&gt; mes PCs. Le &lt;em&gt;format&lt;/em&gt; wiki est assez adapt√© √† une prise de note et √† la cr√©ation de contenu plus complet (comme des &lt;a href=&#34;http://shortbrain.org&#34;&gt;articles&lt;/a&gt; ou de la documentation pour des projets en cours). Les conditions √©taient les suivantes :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Facilit√© de mise en place.&lt;/li&gt;
&lt;li&gt;Pas de base de donn√©es.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Merging&lt;/em&gt; facile (&lt;a href=&#34;http://git-scm.com&#34;&gt;git&lt;/a&gt; &lt;em&gt;rules my world&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://daringfireball.net/projects/markdown/&#34;&gt;Markdown&lt;/a&gt; comme syntaxe, car utilis√© √† peu pr√®s partout (blogs, articles, READMEs, documentations).&lt;/li&gt;
&lt;li&gt;√âditable √† partir d&amp;rsquo;une interface web ou de mon √©diteur favoris.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;L&amp;rsquo;outil qui remplit presque toutes ces conditions s&amp;rsquo;appelle &lt;a href=&#34;https://github.com/github/gollum&#34;&gt;gollum&lt;/a&gt;. C&amp;rsquo;est un moteur wiki, √©cris en ruby, qui se base sur un repository &lt;a href=&#34;http://git-scm.com&#34;&gt;git&lt;/a&gt;. Il est d√©velopper par l&amp;rsquo;√©quipe de &lt;a href=&#34;http://github.com&#34;&gt;Github&lt;/a&gt; et c&amp;rsquo;est celui qui est utilis√© par les pages wiki l√†-bas. Il permet d&amp;rsquo;utiliser √† peu pr√®s n&amp;rsquo;importe quel syntaxe (dont &lt;a href=&#34;https://github.com/github/github-flavored-markdown&#34;&gt;github-markdown&lt;/a&gt; qui est assez proche de celle de &lt;a href=&#34;http://johnmacfarlane.net/pandoc&#34;&gt;pandoc&lt;/a&gt;). Par ailleurs, comme il se base sur &lt;a href=&#34;http://git-scm.com&#34;&gt;git&lt;/a&gt;, les points &lt;em&gt;&amp;ldquo;pas de base de donn√©es&amp;rdquo;&lt;/em&gt;, &lt;em&gt;&amp;ldquo;merging facile&amp;rdquo;&lt;/em&gt; et &lt;em&gt;&amp;ldquo;√©ditable √©galement √† partir de mon √©diteur favoris&amp;rdquo;&lt;/em&gt; sont toutes remplies.&lt;/p&gt;

&lt;p&gt;Avec &lt;a href=&#34;https://github.com/github/gollum&#34;&gt;Gollum&lt;/a&gt; vous avez un wiki markdown d√©centralis√©, √©ditable via une interface web ou via votre √©diteur favoris.&lt;/p&gt;

&lt;h2 id=&#34;mise-en-place&#34;&gt;Mise en place&lt;/h2&gt;

&lt;p&gt;La mise en place est relativement simple ; apr√®s tout d√©pend du besoin que vous avez. L&amp;rsquo;installation se fait par &lt;a href=&#34;rubygems.org&#34;&gt;RubyGem&lt;/a&gt; ou en clonant le repository.&lt;/p&gt;


# Installation de gollum et du format markdown de github
$ gem install gollum gitub-markdown


&lt;p&gt;Si vous n&amp;rsquo;utilisez pas &lt;a href=&#34;https://github.com/sstephenson/rbenv&#34;&gt;rbenv&lt;/a&gt; ou &lt;a href=&#34;https://rvm.io/&#34;&gt;rvm&lt;/a&gt; il est probable qu&amp;rsquo;il faille lancer la commande en root ou utiliser sudo.&lt;/p&gt;

&lt;p&gt;Ensuite, il suffit de lancer &lt;a href=&#34;https://github.com/github/gollum&#34;&gt;Gollum&lt;/a&gt; dans un dossier qui est un repository git ; le tour est jou√©&lt;/p&gt;


# J&#39;ulitise ~/desktop/wiki pour mon wiki
$ cd ~/desktop/wiki &amp;&amp; gollum


&lt;p&gt;L&amp;rsquo;id√©e finale est d&amp;rsquo;automatiser deux choses :&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Le d√©marrage de gollum&lt;/li&gt;
&lt;li&gt;La synchronisation du repository avec les diff√©rents autres &lt;em&gt;remotes&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Suivant le syst√®me d&amp;rsquo;exploitation et/ou la distribution utilis√©es, il y a √©norm√©ment de possibilit√© d&amp;rsquo;effectuer cette automatisation. Dans mon cas, j&amp;rsquo;ai une &lt;a href=&#34;http://debian.org&#34;&gt;Debian&lt;/a&gt; assez light, avec surtout plein de scripts. Je d√©marre donc &lt;a href=&#34;https://github.com/github/gollum&#34;&gt;Gollum&lt;/a&gt; au d√©marrage de ma session gr√¢ce √† une script qui est lanc√© dans la foul√©e du gestionnaire de fen√™tre. La synchronisation se fait gr√¢ce √† une t√¢che planifi√©e &lt;em&gt;cron&lt;/em&gt; qui est &amp;ldquo;distribu√©&amp;rdquo; sur chacune de mes machines.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;C&amp;rsquo;est tout pour le moment&lt;/em&gt; ;-).&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Maven Release Gitflow</title>
      <link>http://vincent.demeester.fr/posts/2012-07-23-maven-release-gitflow/</link>
      <pubDate>Mon, 23 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2012-07-23-maven-release-gitflow/</guid>
      <description>

&lt;p&gt;I like a lot the &lt;a href=&#34;http://nvie.com/posts/a-successful-git-branching-model/&#34;&gt;gitflow&lt;/a&gt; way of managing project.
When working on maven project, there is few great plugins that helps to get
the work done. One of them is &lt;a href=&#34;http://maven.apache.org/plugins/maven-release-plugin&#34;&gt;maven-release-plugin&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Inspired on this &lt;a href=&#34;https://gist.github.com/1043970&#34;&gt;gist&lt;/a&gt;, I&amp;rsquo;ve come with
a cool way of doing things (let say we want to release a 0.1 version of an
artifact) :&lt;/p&gt;

&lt;h1 id=&#34;prepare-the-pom-xml&#34;&gt;Prepare the pom.xml.&lt;/h1&gt;

&lt;p&gt;It needs &lt;code&gt;&amp;lt;scm&amp;gt;&lt;/code&gt; entries, &lt;code&gt;&amp;lt;distributionManagement&amp;gt;&lt;/code&gt; entries
(to know where to deploy the release artifact) and few options for the
maven-release-plugin :&lt;/p&gt;


&lt;project&gt;

    &lt;!-- [‚Ä¶] --&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;!-- [‚Ä¶] --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.3.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;tagNameFormat&gt;v@{project.version}&lt;/tagNameFormat&gt;
                    &lt;pushChanges&gt;false&lt;/pushChanges&gt;
                    &lt;localCheckout&gt;true&lt;/localCheckout&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;!-- [‚Ä¶] --&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;!-- [‚Ä¶] --&gt;

&lt;/project&gt;


&lt;p&gt;Few explanation here :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tagNameFormat&lt;/code&gt; is here to change the default tag name (which is &lt;code&gt;${project.artifactId}-${project.version}&lt;/code&gt;) to a better one.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pushChanges&lt;/code&gt; set to &lt;code&gt;false&lt;/code&gt; tells  maven-release-plugin not to push
changes (this will become useful)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;localCheckout&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt; tells maven-release-plugin to clone from
local repository (not distant). This is especially useful here because we
didn&amp;rsquo;t push anything (so not setting this option would result in a failure).&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;the-real-stuff&#34;&gt;The real stuff&lt;/h1&gt;

&lt;p&gt;First create a release branch from develop.&lt;/p&gt;


$ git checkout -b release/v0.1 develop


&lt;p&gt;Then run the maven release stuff.&lt;/p&gt;


$ mvn release:prepare               # change the pom, commit and tag version, and
                                    # re-change pom (by incrementing SNAPSHOT version)
$ mvn release:perform               # get the tagged version, compile and deploy


&lt;p&gt;And the real fun begins.&lt;/p&gt;


$ git checkout develop              # get back to the develop branch
$ git merge --no-ff release/v0.1    # merge the version back into develop
$ git checkout master               # go to the master branch
$ git merge --no-ff release/v0.1~1  # merge the version back into master but
                                    # the tagged version instead of the release/v0.1 HEAD
$ git branch -D release/v0.1        # Removing the release branch
$ git push --all &amp;&amp; git push --tags # Finally push everything


&lt;p&gt;The real magic here is the &lt;code&gt;git merge --no-ff release/v0.1~1&lt;/code&gt; which will
merge into master the commit before the HEAD of the branch &lt;code&gt;release/v0.1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The next step would be to create a helper script that automates this and
verify that the &lt;code&gt;pom.xml&lt;/code&gt; has the right configuration options.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Edit 17:58&lt;/strong&gt; : You can take a look &lt;a href=&#34;https://github.com/vdemeester/java-config/blob/master/bin/mvn-release-flow&#34;&gt;here&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>News</title>
      <link>http://vincent.demeester.fr/posts/2012-07-21-news/</link>
      <pubDate>Sat, 21 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2012-07-21-news/</guid>
      <description>&lt;p&gt;Je suis rest√© assez longtemps silencieux, √† cause du boulot entre autre. Je
vais donc rem√©dier un peu √† √ßa en publiant un petit post &lt;em&gt;news&lt;/em&gt; :-).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Je suis fan de cyclisme. Mon v√©lo de course est ma seconde paire de jambes.
Enfin, le mot juste serait plut√¥t √©tait. Il y a quelques semaines, en
rentrant du boulot, j&amp;rsquo;ai sentis un grosse vibration, puis plus moyen de
tourner les p√©dales. Intrigu√©, j&amp;rsquo;ai jet√© un coup d&amp;rsquo;≈ìil au v√©lo, et &lt;em&gt;oh rage
oh d√©sespoir&lt;/em&gt; j&amp;rsquo;ai d√©couvert que la &lt;em&gt;fourche arri√®re&lt;/em&gt; du v√©lo c&amp;rsquo;√©tait tout
simplement fendue.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://vincent.demeester.fr/images/2012/velo_casse.jpg&#34; alt=&#34;Fourche arri√®re du v√©lo&#34; title=&#34;Fourche arri√®re du v√©lo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Il ne me restait plus que mes yeux pour pleurer et mes jambes pour faire les
  7kms qui restait √† effectuer jusqu&amp;rsquo;√† mon appartement.&lt;/p&gt;

&lt;p&gt;Bien entendu ce n&amp;rsquo;est que mat√©riel mais ce v√©lo avait une grande importance
  sentimentale : il avait mon √¢ge et appartenait √† mon p√®re quand j&amp;rsquo;√©tais
  petit.&lt;/p&gt;

&lt;p&gt;Maintenant il ne reste plus qu&amp;rsquo;√† sortir la carte bleue pour m&amp;rsquo;en procurer un
  nouveau‚Ä¶&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Je suis actuellement en vacances pour deux petites semaines (ouf !). Cela me
permet, entre autre, de me r√©entrainer √† monter des cols (vu que je suis
dans les Alpes) ; parce qu&amp;rsquo;√† Bordeaux, c&amp;rsquo;est assez difficile d&amp;rsquo;en trouver.
Par contre il me reste beaucoup de boulot pour retrouver ma forme d&amp;rsquo;il
y a une dizaine d&amp;rsquo;ann√©e et de monter facilement le &lt;em&gt;Grand Colombier&lt;/em&gt; !&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Je joue pas mal avec &lt;a href=&#34;http://vaadin.com&#34;&gt;Vaadin&lt;/a&gt; en ce moment,
principalement pour le boulot. J&amp;rsquo;annonce donc deux petits projets en cours :&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://vdemeester.github.com/vaadin-container-utils&#34;&gt;vaadin-container-utils&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;librarie utilitaire pour la cr√©ation de Container vaadin.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://vdemeester.github.com/vaadin-composite-layout&#34;&gt;vaadin-composite-layout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;un composant vaadin hautement flexible (mais je suis mauvais pour les
noms).&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Et &amp;ldquo;c&amp;rsquo;est tout pour le moment&amp;rdquo;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Jekyll Forman Guard Bundler</title>
      <link>http://vincent.demeester.fr/posts/2012-05-13-jekyll-foreman-guard-bundler/</link>
      <pubDate>Sun, 13 May 2012 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2012-05-13-jekyll-foreman-guard-bundler/</guid>
      <description>

&lt;p&gt;This post is a quick &amp;ldquo;How did I setup my Jekyll environnement ?&amp;rdquo;. We are going
all the tools that are quite awesome in Ruby.&lt;/p&gt;

&lt;h1 id=&#34;goal&#34;&gt;Goal&lt;/h1&gt;

&lt;p&gt;The goal is simple :&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;I want to be able to install any dependent &lt;a href=&#34;http://rubygems.org&#34;&gt;Gem&lt;/a&gt; with a
&lt;em&gt;on-liner&lt;/em&gt; command&lt;/li&gt;
&lt;li&gt;I want to be able to run a &lt;em&gt;Jekyll server&lt;/em&gt; that auto updates.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;We are going to play with : &lt;a href=&#34;http://gembundler.com/&#34;&gt;Bundler&lt;/a&gt;,
&lt;a href=&#34;https://github.com/guard/guard&#34;&gt;Guard&lt;/a&gt; and &lt;a href=&#34;https://github.com/ddollar/foreman&#34;&gt;foreman&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;bundler&#34;&gt;Bundler&lt;/h2&gt;

&lt;p&gt;Bundler let us run &lt;code&gt;bundle install&lt;/code&gt; to get all Ruby Gems we will need ; It use
a file name &lt;code&gt;Gemfile&lt;/code&gt;. The gems we need are simple : &lt;code&gt;jekyll&lt;/code&gt;, &lt;code&gt;guard&lt;/code&gt; and some
Guard extensions.&lt;/p&gt;


source &#34;http://rubygems.org&#34;

gem &#39;jekyll&#39;
gem &#39;guard&#39;
gem &#39;guard-jekyll2&#39;
gem &#39;guard-shell&#39;
gem &#39;guard-bundler&#39;


&lt;h2 id=&#34;guard&#34;&gt;Guard&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Guard is a command line tool to easily handle events on file system modifications.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Guard will be watching file we told him and run action in consequence ; The file
is name &lt;code&gt;Guardfile&lt;/code&gt;.&lt;/p&gt;


guard &#39;jekyll2&#39; do
  watch %r{.*}
end

guard :bundler do
  watch(&#39;Gemfile&#39;)
end
# vim:filetype=ruby


&lt;h2 id=&#34;foreman&#34;&gt;Foreman&lt;/h2&gt;

&lt;p&gt;Finally, foreman will let us declare our processes and will handle the start,
forward the output and handle the shutdown. It can then export its configuration
into more &lt;em&gt;production-ready&lt;/em&gt; file (&lt;code&gt;init&lt;/code&gt;, &lt;code&gt;upstard&lt;/code&gt;, ‚Ä¶) ; It uses a file named
&lt;code&gt;Procfile&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;We will tell foreman to run :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The jekyll build-in server : &lt;code&gt;jekyll --server&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Guard, to handle file changes &lt;em&gt;in background&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;


web: bundle exec jekyll --server
guard: bundle exec guard


&lt;p&gt;And that&amp;rsquo;s all folk. Now, you just need to run foreman in the Jekyll-powered
directory and edit your files.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Gitolite quick and dirty mirror</title>
      <link>http://vincent.demeester.fr/posts/2012-05-08-gitolite-quick-and-dirty-mirror/</link>
      <pubDate>Tue, 08 May 2012 00:00:00 +0000</pubDate>
      
      <guid>http://vincent.demeester.fr/posts/2012-05-08-gitolite-quick-and-dirty-mirror/</guid>
      <description>

&lt;p&gt;I&amp;rsquo;m running a gitolite &lt;em&gt;instance&lt;/em&gt; on my personal server to manage my repositories
(personnal, private or public) ; and I am quickly going to share with you how I
setup a &lt;em&gt;quick and dirty&lt;/em&gt; mirror feature.&lt;/p&gt;

&lt;p&gt;First, I am using &lt;strong&gt;gitolite 3&lt;/strong&gt;. The mirroring we are going to setup is not the
&lt;em&gt;supported&lt;/em&gt; &lt;a href=&#34;http://sitaramc.github.com/gitolite/mirroring.html&#34;&gt;mirroring &lt;strong&gt;built-in&lt;/strong&gt;&lt;/a&gt;.
We are going to implement a simplier way to set mirror thing :&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Write a custom gitolite command ; the idea is to be able to write &lt;code&gt;git-config&lt;/code&gt;
stuff.&lt;/li&gt;
&lt;li&gt;Write a hook that take a specific &lt;code&gt;git-config&lt;/code&gt; (let say &lt;code&gt;mirror.url&lt;/code&gt;) and do
a simple mirroring.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;gitolite-commands&#34;&gt;Gitolite commands&lt;/h1&gt;

&lt;p&gt;Gitolite 3 has been rewritten to be more flexible : &lt;a href=&#34;http://sitaramc.github.com/gitolite/g3why.html&#34;&gt;Why a completely new version&lt;/a&gt;.
The rewrite made it really easy to extend gitolite. &lt;del&gt;I&amp;rsquo;ve fork &lt;a href=&#34;https://github.com/vdemeester/gitolite&#34;&gt;gitolite&lt;/a&gt; on github&lt;/del&gt;
I&amp;rsquo;ve created a &lt;a href=&#34;http://github.com/vdemeester/vdemeester-gitolite-local-code&#34;&gt;repository git&lt;/a&gt;
to easily add commands to my gitolite instance via &lt;em&gt;local code&lt;/em&gt;. The gitolite command I wrote is
a quick and dirty script in shell to add &lt;code&gt;git config&lt;/code&gt;. The source should speek
for itself ; It &lt;em&gt;should&lt;/em&gt; include some way to check if the given config is not
already present in the &lt;code&gt;gitolite-admin&lt;/code&gt; configuration file ‚Äî and so might be
rewritten in &lt;code&gt;Perl&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The command is &lt;code&gt;write-git-config&lt;/code&gt; because a &lt;code&gt;git-config&lt;/code&gt; command already exists
in the built-in commands.&lt;/p&gt;


#!/bin/sh

# Usage:    ssh git@host write-git-config &lt;repo&gt; &lt;key&gt; &lt;value&gt;
#
# Set git-config value for user-created (&#34;wild&#34;) repo.

die() { echo &#34;$@&#34; &gt;&amp;2; exit 1; }
usage() { perl -lne &#39;print substr($_, 2) if /^# Usage/../^$/&#39; &lt; $0; exit 1; }
[ -z &#34;$1&#34; ] &amp;&amp; [ -z &#34;$2&#34; ] &amp;&amp; [ -z &#34;$3&#34; ] &amp;&amp; usage
[ &#34;$1&#34; = &#34;-h&#34; ] &amp;&amp; usage
[ -z &#34;$GL_USER&#34; ] &amp;&amp; die GL_USER not set

# ----------------------------------------------------------------------
repo=$1; shift
key=$1; shift
value=$1; shift

# this shell script takes arguments that are completely under the user&#39;s
# control, so make sure you quote those suckers!

if gitolite query-rc -q WRITER_CAN_UPDATE_DESC
then
    gitolite access -q &#34;$repo&#34; $GL_USER W any || die You are not authorised
else
    gitolite creator &#34;$repo&#34; $GL_USER || die You are not authorised
fi

# if it passes, $repo is a valid repo name so it is known to contain only sane
# characters.  This is because &#39;gitolite creator&#39; return true only if there
# *is* a repo of that name and it has a gl-creator file that contains the same
# text as $GL_USER.

configfile=`gitolite query-rc GL_REPO_BASE`/&#34;$repo&#34;.git/config

git config --file &#34;$configfile&#34; &#34;$key&#34; &#34;$value&#34;


&lt;h1 id=&#34;gitolite-hooks&#34;&gt;Gitolite hooks&lt;/h1&gt;

&lt;p&gt;The next step is to write a quick &lt;code&gt;post-receive&lt;/code&gt; hook that check if there is a
certain &lt;code&gt;git-config&lt;/code&gt; entry and run &lt;code&gt;git push --mirror&lt;/code&gt;. The file is in
&lt;code&gt;$HOME/.gitolite/hooks/common/post-receive&lt;/code&gt; ; you could add a better system to
hooks (to be able to add &amp;ldquo;dynamic&amp;rdquo; hooks, ‚Ä¶).&lt;/p&gt;


#!/bin/sh

# Simple gitolite mirroring

# flush STDIN coming from git, because gitolite&#39;s own post-receive.mirrorpush
# script does the same thing
[ -t 0 ] || cat &gt;/dev/null

[ -z &#34;$GL_REPO&#34; ] &amp;&amp; die GL_REPO not set

target=`git config --get mirror.url`
[ -z &#34;$target&#34; ] &amp;&amp; exit 0

# Support a REPO variable for wildcard mirrors
gl_repo_escaped=$(echo $GL_REPO | sed &#39;s/\//\\\//g&#39;)
target=$(echo $target | sed -e &#34;s/REPO/$gl_repo_escaped/g&#34;)

# Do the mirror push
git push --mirror $target


&lt;p&gt;The next, and final step is to run &lt;code&gt;gitolite compile&lt;/code&gt; to update links to hooks
for every repositories.&lt;/p&gt;

&lt;h1 id=&#34;for-real&#34;&gt;For real&lt;/h1&gt;

&lt;p&gt;And finaly, this is the final step you&amp;rsquo;ll do.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ssh git@host write-git-config vincent/vcsh-home mirror.url git@github.com:vdemeester/vcsh-home.git
$ git push
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 294 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: To git@github.com:vdemeester/vcsh-home.git
remote:    65681a8..701c990  master -&amp;gt; master
To git@host:vincent/vcsh-home.git
   65681a8..701c990  master -&amp;gt; master
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And that should be it !&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update 2012/10/04&lt;/strong&gt; : Moved from gitolite fork to &lt;em&gt;gitolite local code&lt;/em&gt;
repository.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>